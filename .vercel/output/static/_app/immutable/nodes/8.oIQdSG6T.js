import{s as pe,n as K,o as me,r as de,a as ae}from"../chunks/DSOgNidj.js";import{S as ge,i as be,d as f,a as V,b as _,k as I,l as ke,g as A,c as p,e as O,m as H,j,h as m,o as oe,s as q,f as M,t as z,p as ve,r as x,v as Q,q as G,w as ie,u as $}from"../chunks/BEA7QHMY.js";import{e as ee}from"../chunks/D6YF6ztN.js";import{b as Ce,g as ye,j as Te}from"../chunks/B0jSzsKY.js";function re(s,e,l){const t=s.slice();t[16]=e[l];const n=t[7](t[16].category_id);return t[17]=n,t}function ce(s,e,l){const t=s.slice();return t[20]=e[l],t}function Ee(s){let e,l,t,n="All Types",a,o="ðŸ’µ Income",r,h="ðŸ’¸ Expense",u,i,d,P="All Months",N,L,B,w,T=ee(s[6]),g=[];for(let c=0;c<T.length;c+=1)g[c]=ue(ce(s,T,c));function b(c,D){return c[4].length===0?Oe:Se}let E=b(s),C=E(s);return{c(){e=m("div"),l=m("select"),t=m("option"),t.textContent=n,a=m("option"),a.textContent=o,r=m("option"),r.textContent=h,u=j(),i=m("select"),d=m("option"),d.textContent=P;for(let c=0;c<g.length;c+=1)g[c].c();N=j(),C.c(),L=ie(),this.h()},l(c){e=p(c,"DIV",{class:!0});var D=O(e);l=p(D,"SELECT",{class:!0});var v=O(l);t=p(v,"OPTION",{"data-svelte-h":!0}),H(t)!=="svelte-7jahaz"&&(t.textContent=n),a=p(v,"OPTION",{"data-svelte-h":!0}),H(a)!=="svelte-15pp2w0"&&(a.textContent=o),r=p(v,"OPTION",{"data-svelte-h":!0}),H(r)!=="svelte-i2vc1x"&&(r.textContent=h),v.forEach(f),u=A(D),i=p(D,"SELECT",{class:!0});var k=O(i);d=p(k,"OPTION",{"data-svelte-h":!0}),H(d)!=="svelte-iu6z41"&&(d.textContent=P);for(let J=0;J<g.length;J+=1)g[J].l(k);k.forEach(f),D.forEach(f),N=A(c),C.l(c),L=ie(),this.h()},h(){t.__value="all",G(t,t.__value),a.__value="income",G(a,a.__value),r.__value="expense",G(r,r.__value),I(l,"class","input"),s[0]===void 0&&ae(()=>s[10].call(l)),d.__value="all",G(d,d.__value),I(i,"class","input"),s[1]===void 0&&ae(()=>s[11].call(i)),I(e,"class","filter-row")},m(c,D){V(c,e,D),_(e,l),_(l,t),_(l,a),_(l,r),x(l,s[0],!0),_(e,u),_(e,i),_(i,d);for(let v=0;v<g.length;v+=1)g[v]&&g[v].m(i,null);x(i,s[1],!0),V(c,N,D),C.m(c,D),V(c,L,D),B||(w=[Q(l,"change",s[10]),Q(i,"change",s[11])],B=!0)},p(c,D){if(D&1&&x(l,c[0]),D&64){T=ee(c[6]);let v;for(v=0;v<T.length;v+=1){const k=ce(c,T,v);g[v]?g[v].p(k,D):(g[v]=ue(k),g[v].c(),g[v].m(i,null))}for(;v<g.length;v+=1)g[v].d(1);g.length=T.length}D&66&&x(i,c[1]),E===(E=b(c))&&C?C.p(c,D):(C.d(1),C=E(c),C&&(C.c(),C.m(L.parentNode,L)))},d(c){c&&(f(e),f(N),f(L)),ve(g,c),C.d(c),B=!1,de(w)}}}function De(s){let e,l;return{c(){e=m("div"),l=z(s[3]),this.h()},l(t){e=p(t,"DIV",{class:!0});var n=O(e);l=M(n,s[3]),n.forEach(f),this.h()},h(){I(e,"class","error")},m(t,n){V(t,e,n),_(e,l)},p(t,n){n&8&&q(l,t[3])},d(t){t&&f(e)}}}function Ie(s){let e,l="Loading transactions...â³";return{c(){e=m("div"),e.textContent=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-60y3fr"&&(e.textContent=l),this.h()},h(){I(e,"class","loading")},m(t,n){V(t,e,n)},p:K,d(t){t&&f(e)}}}function ue(s){let e,l=s[20].label+"",t;return{c(){e=m("option"),t=z(l),this.h()},l(n){e=p(n,"OPTION",{});var a=O(e);t=M(a,l),a.forEach(f),this.h()},h(){e.__value=s[20].value,G(e,e.__value)},m(n,a){V(n,e,a),_(e,t)},p:K,d(n){n&&f(e)}}}function Se(s){let e,l=ee(s[4]),t=[];for(let n=0;n<l.length;n+=1)t[n]=fe(re(s,l,n));return{c(){e=m("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=p(n,"DIV",{class:!0});var a=O(e);for(let o=0;o<t.length;o+=1)t[o].l(a);a.forEach(f),this.h()},h(){I(e,"class","transactions-list svelte-g6dn91")},m(n,a){V(n,e,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,a){if(a&432){l=ee(n[4]);let o;for(o=0;o<l.length;o+=1){const r=re(n,l,o);t[o]?t[o].p(r,a):(t[o]=fe(r),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&f(e),ve(t,n)}}}function Oe(s){let e,l='No transactions found. <a href="/add" class="svelte-g6dn91">Add one</a> to get started!';return{c(){e=m("div"),e.innerHTML=l,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1r9yko7"&&(e.innerHTML=l),this.h()},h(){I(e,"class","empty-state svelte-g6dn91")},m(t,n){V(t,e,n)},p:K,d(t){t&&f(e)}}}function _e(s){let e,l=s[16].notes+"",t;return{c(){e=z("â€¢ "),t=z(l)},l(n){e=M(n,"â€¢ "),t=M(n,l)},m(n,a){V(n,e,a),V(n,t,a)},p(n,a){a&16&&l!==(l=n[16].notes+"")&&q(t,l)},d(n){n&&(f(e),f(t))}}}function Ve(s){let e,l="ðŸ—‘ï¸",t,n;function a(){return s[14](s[16])}return{c(){e=m("button"),e.textContent=l,this.h()},l(o){e=p(o,"BUTTON",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-197wlh0"&&(e.textContent=l),this.h()},h(){I(e,"class","delete-btn svelte-g6dn91")},m(o,r){V(o,e,r),t||(n=Q(e,"click",a),t=!0)},p(o,r){s=o},d(o){o&&f(e),t=!1,n()}}}function we(s){let e,l,t="âœ“",n,a,o="âœ•",r,h;function u(){return s[12](s[16])}return{c(){e=m("div"),l=m("button"),l.textContent=t,n=j(),a=m("button"),a.textContent=o,this.h()},l(i){e=p(i,"DIV",{class:!0});var d=O(e);l=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-1wpriza"&&(l.textContent=t),n=A(d),a=p(d,"BUTTON",{class:!0,"data-svelte-h":!0}),H(a)!=="svelte-14t6zjs"&&(a.textContent=o),d.forEach(f),this.h()},h(){I(l,"class","btn btn-danger btn-sm svelte-g6dn91"),I(a,"class","btn btn-secondary btn-sm svelte-g6dn91"),I(e,"class","delete-confirm svelte-g6dn91")},m(i,d){V(i,e,d),_(e,l),_(e,n),_(e,a),r||(h=[Q(l,"click",u),Q(a,"click",s[13])],r=!0)},p(i,d){s=i},d(i){i&&f(e),r=!1,de(h)}}}function fe(s){var le,ne;let e,l,t,n=(((le=s[17])==null?void 0:le.icon)||"â“")+"",a,o,r,h,u=(((ne=s[17])==null?void 0:ne.name)||"Unknown")+"",i,d,P,N=he(s[16].date)+"",L,B,w,T,g=s[16].transaction_type==="income"?"+":"-",b,E,C=s[16].amount.toLocaleString("en-US",{minimumFractionDigits:2})+"",c,D,v,k=s[16].notes&&_e(s);function J(y,S){return y[5]===y[16].id?we:Ve}let R=J(s),U=R(s);return{c(){e=m("div"),l=m("div"),t=m("div"),a=z(n),o=j(),r=m("div"),h=m("h4"),i=z(u),d=j(),P=m("p"),L=z(N),k&&k.c(),B=j(),w=m("div"),T=m("span"),b=z(g),E=z(`
                $`),c=z(C),D=j(),U.c(),v=j(),this.h()},l(y){e=p(y,"DIV",{class:!0});var S=O(e);l=p(S,"DIV",{class:!0});var F=O(l);t=p(F,"DIV",{class:!0});var W=O(t);a=M(W,n),W.forEach(f),o=A(F),r=p(F,"DIV",{class:!0});var X=O(r);h=p(X,"H4",{});var se=O(h);i=M(se,u),se.forEach(f),d=A(X),P=p(X,"P",{});var te=O(P);L=M(te,N),k&&k.l(te),te.forEach(f),X.forEach(f),F.forEach(f),B=A(S),w=p(S,"DIV",{class:!0});var Y=O(w);T=p(Y,"SPAN",{class:!0});var Z=O(T);b=M(Z,g),E=M(Z,`
                $`),c=M(Z,C),Z.forEach(f),D=A(Y),U.l(Y),Y.forEach(f),v=A(S),S.forEach(f),this.h()},h(){I(t,"class","transaction-icon"),I(r,"class","transaction-details"),I(l,"class","transaction-info"),I(T,"class","transaction-amount"),$(T,"income",s[16].transaction_type==="income"),$(T,"expense",s[16].transaction_type==="expense"),I(w,"class","transaction-actions svelte-g6dn91"),I(e,"class","transaction-item")},m(y,S){V(y,e,S),_(e,l),_(l,t),_(t,a),_(l,o),_(l,r),_(r,h),_(h,i),_(r,d),_(r,P),_(P,L),k&&k.m(P,null),_(e,B),_(e,w),_(w,T),_(T,b),_(T,E),_(T,c),_(w,D),U.m(w,null),_(e,v)},p(y,S){var F,W;S&16&&n!==(n=(((F=y[17])==null?void 0:F.icon)||"â“")+"")&&q(a,n),S&16&&u!==(u=(((W=y[17])==null?void 0:W.name)||"Unknown")+"")&&q(i,u),S&16&&N!==(N=he(y[16].date)+"")&&q(L,N),y[16].notes?k?k.p(y,S):(k=_e(y),k.c(),k.m(P,null)):k&&(k.d(1),k=null),S&16&&g!==(g=y[16].transaction_type==="income"?"+":"-")&&q(b,g),S&16&&C!==(C=y[16].amount.toLocaleString("en-US",{minimumFractionDigits:2})+"")&&q(c,C),S&16&&$(T,"income",y[16].transaction_type==="income"),S&16&&$(T,"expense",y[16].transaction_type==="expense"),R===(R=J(y))&&U?U.p(y,S):(U.d(1),U=R(y),U&&(U.c(),U.m(w,null)))},d(y){y&&f(e),k&&k.d(),U.d()}}}function Ne(s){let e,l,t,n="ðŸ“‹ Transactions",a;function o(u,i){return u[2]?Ie:u[3]?De:Ee}let r=o(s),h=r(s);return{c(){e=j(),l=m("div"),t=m("h1"),t.textContent=n,a=j(),h.c(),this.h()},l(u){ke("svelte-1ltto5v",document.head).forEach(f),e=A(u),l=p(u,"DIV",{class:!0});var d=O(l);t=p(d,"H1",{class:!0,"data-svelte-h":!0}),H(t)!=="svelte-r2zk82"&&(t.textContent=n),a=A(d),h.l(d),d.forEach(f),this.h()},h(){document.title="Transactions - Jim's Finance Tracker",I(t,"class","page-title"),I(l,"class","page")},m(u,i){V(u,e,i),V(u,l,i),_(l,t),_(l,a),h.m(l,null)},p(u,[i]){r===(r=o(u))&&h?h.p(u,i):(h.d(1),h=r(u),h&&(h.c(),h.m(l,null)))},i:K,o:K,d(u){u&&(f(e),f(l)),h.d()}}}function he(s){return new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function Le(s,e,l){let t=!0,n="",a=[],o=[],r=[],h="all",u="all",i=null;const d=Array.from({length:12},(b,E)=>{const C=new Date;return C.setMonth(C.getMonth()-E),{value:C.toISOString().slice(0,7),label:C.toLocaleDateString("en-US",{month:"long",year:"numeric"})}});me(async()=>{try{l(9,[a,r]=await Promise.all([Ce(200),ye()]),a)}catch(b){l(3,n=b.message)}finally{l(2,t=!1)}});function P(b){return r.find(E=>E.id===b)}async function N(b){try{await Te(b),l(9,a=a.filter(E=>E.id!==b)),l(5,i=null)}catch(E){l(3,n=E.message)}}function L(){h=oe(this),l(0,h)}function B(){u=oe(this),l(1,u),l(6,d)}const w=b=>N(b.id),T=()=>l(5,i=null),g=b=>l(5,i=b.id);return s.$$.update=()=>{if(s.$$.dirty&515){let b=a;h!=="all"&&(b=b.filter(E=>E.transaction_type===h)),u!=="all"&&(b=b.filter(E=>E.date.startsWith(u))),l(4,o=b)}},[h,u,t,n,o,i,d,P,N,a,L,B,w,T,g]}class Ae extends ge{constructor(e){super(),be(this,e,Le,Ne,pe,{})}}export{Ae as component};
