import{s as Pe,n as he,o as Re,r as Ae,a as je}from"../chunks/DSOgNidj.js";import{S as Se,i as He,d as _,a as j,b as i,k as f,l as Oe,g as T,c as h,e as E,m as Q,j as w,h as v,n as ve,o as Me,s as X,f as O,t as M,v as $,x as Ce,p as Ue,r as se,u as Ee,q as _e,w as qe}from"../chunks/BTTWjJDS.js";import{e as pe}from"../chunks/D6YF6ztN.js";import{c as De,g as Fe,t as ze,f as Je,h as Ye}from"../chunks/BlK5NUL5.js";function Ie(s,e,t){const l=s.slice();l[23]=e[t],l[26]=t;const n=l[10](l[23].category_id);return l[24]=n,l}function Te(s,e,t){const l=s.slice();return l[24]=e[t],l}function Ge(s){let e,t=s[4]?"‚úï Cancel":"‚ûï Add New Bill",l,n,r,a,p,c,o,d=s[4]&&we(s);function b(u,y){return u[2].length===0?Xe:We}let C=b(s),m=C(s);return{c(){e=v("button"),l=M(t),r=w(),d&&d.c(),a=w(),m.c(),p=Ce(),this.h()},l(u){e=h(u,"BUTTON",{class:!0});var y=E(e);l=O(y,t),y.forEach(_),r=T(u),d&&d.l(u),a=T(u),m.l(u),p=Ce(),this.h()},h(){f(e,"class",n="btn "+(s[4]?"btn-secondary":"btn-primary")+" add-btn animate-fade-in svelte-wn2slj")},m(u,y){j(u,e,y),i(e,l),j(u,r,y),d&&d.m(u,y),j(u,a,y),m.m(u,y),j(u,p,y),c||(o=$(e,"click",s[14]),c=!0)},p(u,y){y&16&&t!==(t=u[4]?"‚úï Cancel":"‚ûï Add New Bill")&&X(l,t),y&16&&n!==(n="btn "+(u[4]?"btn-secondary":"btn-primary")+" add-btn animate-fade-in svelte-wn2slj")&&f(e,"class",n),u[4]?d?d.p(u,y):(d=we(u),d.c(),d.m(a.parentNode,a)):d&&(d.d(1),d=null),C===(C=b(u))&&m?m.p(u,y):(m.d(1),m=C(u),m&&(m.c(),m.m(p.parentNode,p)))},d(u){u&&(_(e),_(r),_(a),_(p)),d&&d.d(u),m.d(u),c=!1,o()}}}function Ke(s){let e,t;return{c(){e=v("div"),t=M(s[1]),this.h()},l(l){e=h(l,"DIV",{class:!0});var n=E(e);t=O(n,s[1]),n.forEach(_),this.h()},h(){f(e,"class","error")},m(l,n){j(l,e,n),i(e,t)},p(l,n){n&2&&X(t,l[1])},d(l){l&&_(e)}}}function Qe(s){let e,t="Loading bills...";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1bx6put"&&(e.textContent=t),this.h()},h(){f(e,"class","loading")},m(l,n){j(l,e,n)},p:he,d(l){l&&_(e)}}}function we(s){let e,t,l='<h3 class="card-title">New Recurring Bill</h3>',n,r,a,p="Bill Name",c,o,d,b,C,m,u="Amount",y,A,q,S,H,ee="Due Day (1-28)",te,V,F,z,J,k="Category",I,P,ne,U,Y,Z,le,oe,x=pe(s[3].filter(Le)),L=[];for(let g=0;g<x.length;g+=1)L[g]=Ne(Te(s,x,g));return{c(){e=v("div"),t=v("div"),t.innerHTML=l,n=w(),r=v("div"),a=v("label"),a.textContent=p,c=w(),o=v("input"),d=w(),b=v("div"),C=v("div"),m=v("label"),m.textContent=u,y=w(),A=v("input"),q=w(),S=v("div"),H=v("label"),H.textContent=ee,te=w(),V=v("input"),F=w(),z=v("div"),J=v("label"),J.textContent=k,I=w(),P=v("select");for(let g=0;g<L.length;g+=1)L[g].c();ne=w(),U=v("button"),Y=M("Save Bill"),this.h()},l(g){e=h(g,"DIV",{class:!0});var N=E(e);t=h(N,"DIV",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-17kiq7g"&&(t.innerHTML=l),n=T(N),r=h(N,"DIV",{class:!0});var D=E(r);a=h(D,"LABEL",{"data-svelte-h":!0}),Q(a)!=="svelte-1l8q0rw"&&(a.textContent=p),c=T(D),o=h(D,"INPUT",{type:!0,class:!0,placeholder:!0}),D.forEach(_),d=T(N),b=h(N,"DIV",{class:!0});var K=E(b);C=h(K,"DIV",{class:!0});var R=E(C);m=h(R,"LABEL",{"data-svelte-h":!0}),Q(m)!=="svelte-e9aisc"&&(m.textContent=u),y=T(R),A=h(R,"INPUT",{type:!0,class:!0,placeholder:!0,step:!0,min:!0}),R.forEach(_),q=T(K),S=h(K,"DIV",{class:!0});var ae=E(S);H=h(ae,"LABEL",{"data-svelte-h":!0}),Q(H)!=="svelte-tdya0h"&&(H.textContent=ee),te=T(ae),V=h(ae,"INPUT",{type:!0,class:!0,min:!0,max:!0}),ae.forEach(_),K.forEach(_),F=T(N),z=h(N,"DIV",{class:!0});var ie=E(z);J=h(ie,"LABEL",{"data-svelte-h":!0}),Q(J)!=="svelte-17dydz4"&&(J.textContent=k),I=T(ie),P=h(ie,"SELECT",{class:!0});var G=E(P);for(let W=0;W<L.length;W+=1)L[W].l(G);G.forEach(_),ie.forEach(_),ne=T(N),U=h(N,"BUTTON",{class:!0});var B=E(U);Y=O(B,"Save Bill"),B.forEach(_),N.forEach(_),this.h()},h(){f(t,"class","card-header"),f(o,"type","text"),f(o,"class","input"),f(o,"placeholder","e.g., Rent, Netflix"),f(r,"class","form-group"),f(A,"type","number"),f(A,"class","input"),f(A,"placeholder","0.00"),f(A,"step","0.01"),f(A,"min","0.01"),f(C,"class","form-group"),f(V,"type","number"),f(V,"class","input"),f(V,"min","1"),f(V,"max","28"),f(S,"class","form-group"),f(b,"class","form-row"),f(P,"class","input"),s[9]===void 0&&je(()=>s[18].call(P)),f(z,"class","form-group"),f(U,"class","btn btn-success"),U.disabled=Z=!s[6]||!s[7],f(e,"class","card add-form animate-fade-in svelte-wn2slj")},m(g,N){j(g,e,N),i(e,t),i(e,n),i(e,r),i(r,a),i(r,c),i(r,o),se(o,s[6]),i(e,d),i(e,b),i(b,C),i(C,m),i(C,y),i(C,A),se(A,s[7]),i(b,q),i(b,S),i(S,H),i(S,te),i(S,V),se(V,s[8]),i(e,F),i(e,z),i(z,J),i(z,I),i(z,P);for(let D=0;D<L.length;D+=1)L[D]&&L[D].m(P,null);Ee(P,s[9],!0),i(e,ne),i(e,U),i(U,Y),le||(oe=[$(o,"input",s[15]),$(A,"input",s[16]),$(V,"input",s[17]),$(P,"change",s[18]),$(U,"click",s[11])],le=!0)},p(g,N){if(N&64&&o.value!==g[6]&&se(o,g[6]),N&128&&ve(A.value)!==g[7]&&se(A,g[7]),N&256&&ve(V.value)!==g[8]&&se(V,g[8]),N&8){x=pe(g[3].filter(Le));let D;for(D=0;D<x.length;D+=1){const K=Te(g,x,D);L[D]?L[D].p(K,N):(L[D]=Ne(K),L[D].c(),L[D].m(P,null))}for(;D<L.length;D+=1)L[D].d(1);L.length=x.length}N&520&&Ee(P,g[9]),N&192&&Z!==(Z=!g[6]||!g[7])&&(U.disabled=Z)},d(g){g&&_(e),Ue(L,g),le=!1,Ae(oe)}}}function Ne(s){let e,t=s[24].icon+"",l,n,r=s[24].name+"",a,p;return{c(){e=v("option"),l=M(t),n=w(),a=M(r),this.h()},l(c){e=h(c,"OPTION",{});var o=E(e);l=O(o,t),n=T(o),a=O(o,r),o.forEach(_),this.h()},h(){e.__value=p=s[24].id,se(e,e.__value)},m(c,o){j(c,e,o),i(e,l),i(e,n),i(e,a)},p(c,o){o&8&&t!==(t=c[24].icon+"")&&X(l,t),o&8&&r!==(r=c[24].name+"")&&X(a,r),o&8&&p!==(p=c[24].id)&&(e.__value=p,se(e,e.__value))},d(c){c&&_(e)}}}function We(s){let e,t=pe(s[2]),l=[];for(let n=0;n<t.length;n+=1)l[n]=Be(Ie(s,t,n));return{c(){e=v("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){e=h(n,"DIV",{class:!0});var r=E(e);for(let a=0;a<l.length;a+=1)l[a].l(r);r.forEach(_),this.h()},h(){f(e,"class","bills-list svelte-wn2slj")},m(n,r){j(n,e,r);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(e,null)},p(n,r){if(r&13348){t=pe(n[2]);let a;for(a=0;a<t.length;a+=1){const p=Ie(n,t,a);l[a]?l[a].p(p,r):(l[a]=Be(p),l[a].c(),l[a].m(e,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=t.length}},d(n){n&&_(e),Ue(l,n)}}}function Xe(s){let e,t='<div class="empty-state-icon">üîÑ</div> <p>No recurring bills yet.</p> <p style="color: var(--color-text-muted); font-size: 0.875rem;">Add your subscriptions and monthly bills to track them.</p>';return{c(){e=v("div"),e.innerHTML=t,this.h()},l(l){e=h(l,"DIV",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-1gyr4hn"&&(e.innerHTML=t),this.h()},h(){f(e,"class","empty-state animate-fade-in")},m(l,n){j(l,e,n)},p:he,d(l){l&&_(e)}}}function Ze(s){let e,t="üóëÔ∏è",l,n;function r(){return s[22](s[23])}return{c(){e=v("button"),e.textContent=t,this.h()},l(a){e=h(a,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(e)!=="svelte-16ocjfj"&&(e.textContent=t),this.h()},h(){f(e,"class","delete-btn")},m(a,p){j(a,e,p),l||(n=$(e,"click",r),l=!0)},p(a,p){s=a},d(a){a&&_(e),l=!1,n()}}}function xe(s){let e,t,l="Delete?",n,r,a="Yes",p,c,o="No",d,b;function C(){return s[20](s[23])}return{c(){e=v("div"),t=v("span"),t.textContent=l,n=w(),r=v("button"),r.textContent=a,p=w(),c=v("button"),c.textContent=o,this.h()},l(m){e=h(m,"DIV",{class:!0});var u=E(e);t=h(u,"SPAN",{class:!0,"data-svelte-h":!0}),Q(t)!=="svelte-a76z62"&&(t.textContent=l),n=T(u),r=h(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(r)!=="svelte-vqv0qj"&&(r.textContent=a),p=T(u),c=h(u,"BUTTON",{class:!0,"data-svelte-h":!0}),Q(c)!=="svelte-7mudte"&&(c.textContent=o),u.forEach(_),this.h()},h(){f(t,"class","svelte-wn2slj"),f(r,"class","btn btn-danger btn-sm"),f(c,"class","btn btn-secondary btn-sm"),f(e,"class","delete-confirm svelte-wn2slj")},m(m,u){j(m,e,u),i(e,t),i(e,n),i(e,r),i(e,p),i(e,c),d||(b=[$(r,"click",C),$(c,"click",s[21])],d=!0)},p(m,u){s=m},d(m){m&&_(e),d=!1,Ae(b)}}}function Be(s){var ae,ie;let e,t,l,n,r=(((ae=s[24])==null?void 0:ae.icon)||"üì¶")+"",a,p,c,o,d=s[23].name+"",b,C,m,u=(((ie=s[24])==null?void 0:ie.name)||"Unknown")+"",y,A,q,S,H=Ve(s[23].amount)+"",ee,te,V,F,z,J=s[23].due_day+"",k,I=(["st","nd","rd"][((s[23].due_day+90)%100-10)%10-1]||"th")+"",P,ne,U,Y,Z=s[23].is_active===1?"‚è∏Ô∏è Pause":"‚ñ∂Ô∏è Resume",le,oe,x,L,g;function N(){return s[19](s[23])}function D(G,B){return G[5]===G[23].id?xe:Ze}let K=D(s),R=K(s);return{c(){e=v("div"),t=v("div"),l=v("div"),n=v("div"),a=M(r),p=w(),c=v("div"),o=v("h4"),b=M(d),C=w(),m=v("span"),y=M(u),A=w(),q=v("div"),S=M("$"),ee=M(H),te=w(),V=v("div"),F=v("span"),z=M("üìÖ Due on the "),k=M(J),P=M(I),ne=w(),U=v("div"),Y=v("button"),le=M(Z),oe=w(),R.c(),x=w(),this.h()},l(G){e=h(G,"DIV",{class:!0,style:!0});var B=E(e);t=h(B,"DIV",{class:!0});var W=E(t);l=h(W,"DIV",{class:!0});var re=E(l);n=h(re,"DIV",{class:!0});var be=E(n);a=O(be,r),be.forEach(_),p=T(re),c=h(re,"DIV",{});var ce=E(c);o=h(ce,"H4",{});var ge=E(o);b=O(ge,d),ge.forEach(_),C=T(ce),m=h(ce,"SPAN",{class:!0});var ke=E(m);y=O(ke,u),ke.forEach(_),ce.forEach(_),re.forEach(_),A=T(W),q=h(W,"DIV",{class:!0});var me=E(q);S=O(me,"$"),ee=O(me,H),me.forEach(_),W.forEach(_),te=T(B),V=h(B,"DIV",{class:!0});var ue=E(V);F=h(ue,"SPAN",{class:!0});var de=E(F);z=O(de,"üìÖ Due on the "),k=O(de,J),P=O(de,I),de.forEach(_),ne=T(ue),U=h(ue,"DIV",{class:!0});var fe=E(U);Y=h(fe,"BUTTON",{class:!0});var ye=E(Y);le=O(ye,Z),ye.forEach(_),oe=T(fe),R.l(fe),fe.forEach(_),ue.forEach(_),x=T(B),B.forEach(_),this.h()},h(){f(n,"class","bill-icon"),f(m,"class","bill-category"),f(l,"class","bill-title"),f(q,"class","bill-amount"),f(t,"class","bill-header"),f(F,"class","due-day"),f(Y,"class","toggle-btn"),_e(Y,"active",s[23].is_active===1),f(U,"class","bill-actions"),f(V,"class","bill-footer"),f(e,"class","bill-card"),qe(e,"animation-delay",s[26]*.05+"s"),_e(e,"inactive",s[23].is_active===0)},m(G,B){j(G,e,B),i(e,t),i(t,l),i(l,n),i(n,a),i(l,p),i(l,c),i(c,o),i(o,b),i(c,C),i(c,m),i(m,y),i(t,A),i(t,q),i(q,S),i(q,ee),i(e,te),i(e,V),i(V,F),i(F,z),i(F,k),i(F,P),i(V,ne),i(V,U),i(U,Y),i(Y,le),i(U,oe),R.m(U,null),i(e,x),L||(g=$(Y,"click",N),L=!0)},p(G,B){var W,re;s=G,B&4&&r!==(r=(((W=s[24])==null?void 0:W.icon)||"üì¶")+"")&&X(a,r),B&4&&d!==(d=s[23].name+"")&&X(b,d),B&4&&u!==(u=(((re=s[24])==null?void 0:re.name)||"Unknown")+"")&&X(y,u),B&4&&H!==(H=Ve(s[23].amount)+"")&&X(ee,H),B&4&&J!==(J=s[23].due_day+"")&&X(k,J),B&4&&I!==(I=(["st","nd","rd"][((s[23].due_day+90)%100-10)%10-1]||"th")+"")&&X(P,I),B&4&&Z!==(Z=s[23].is_active===1?"‚è∏Ô∏è Pause":"‚ñ∂Ô∏è Resume")&&X(le,Z),B&4&&_e(Y,"active",s[23].is_active===1),K===(K=D(s))&&R?R.p(s,B):(R.d(1),R=K(s),R&&(R.c(),R.m(U,null))),B&4&&_e(e,"inactive",s[23].is_active===0)},d(G){G&&_(e),R.d(),L=!1,g()}}}function $e(s){let e,t,l,n='<h1 class="page-title">Recurring Bills</h1> <p class="page-subtitle">Track your monthly subscriptions &amp; bills</p>',r;function a(o,d){return o[0]?Qe:o[1]?Ke:Ge}let p=a(s),c=p(s);return{c(){e=w(),t=v("div"),l=v("header"),l.innerHTML=n,r=w(),c.c(),this.h()},l(o){Oe("svelte-46hkxr",document.head).forEach(_),e=T(o),t=h(o,"DIV",{class:!0});var b=E(t);l=h(b,"HEADER",{class:!0,"data-svelte-h":!0}),Q(l)!=="svelte-1636m7i"&&(l.innerHTML=n),r=T(b),c.l(b),b.forEach(_),this.h()},h(){document.title="Recurring Bills - Jim's Finance",f(l,"class","page-header"),f(t,"class","page")},m(o,d){j(o,e,d),j(o,t,d),i(t,l),i(t,r),c.m(t,null)},p(o,[d]){p===(p=a(o))&&c?c.p(o,d):(c.d(1),c=p(o),c&&(c.c(),c.m(t,null)))},i:he,o:he,d(o){o&&(_(e),_(t)),c.d()}}}function Ve(s){return s.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}const Le=s=>s.is_income===0;function et(s,e,t){let l=!0,n="",r=[],a=[],p=!1,c=null,o="",d="",b=1,C=null;Re(async()=>{try{t(2,[r,a]=await Promise.all([De(),Fe()]),r,t(3,a));const k=a.filter(I=>I.is_income===0);k.length>0&&t(9,C=k[0].id)}catch(k){t(1,n=k.message)}finally{t(0,l=!1)}});function m(k){return a.find(I=>I.id===k)}async function u(){if(!(!o||!d||!C))try{await Ye(o,parseFloat(d),b,C),t(6,o=""),t(7,d=""),t(8,b=1),t(4,p=!1),t(2,r=await De())}catch(k){t(1,n=k.message)}}async function y(k){try{await ze(k.id,k.is_active===0),t(2,r=r.map(I=>I.id===k.id?{...I,is_active:I.is_active===0?1:0}:I))}catch(I){t(1,n=I.message)}}async function A(k){try{await Je(k),t(2,r=r.filter(I=>I.id!==k)),t(5,c=null)}catch(I){t(1,n=I.message)}}const q=()=>t(4,p=!p);function S(){o=this.value,t(6,o)}function H(){d=ve(this.value),t(7,d)}function ee(){b=ve(this.value),t(8,b)}function te(){C=Me(this),t(9,C),t(3,a)}return[l,n,r,a,p,c,o,d,b,C,m,u,y,A,q,S,H,ee,te,k=>y(k),k=>A(k.id),()=>t(5,c=null),k=>t(5,c=k.id)]}class at extends Se{constructor(e){super(),He(this,e,et,$e,Pe,{})}}export{at as component};
