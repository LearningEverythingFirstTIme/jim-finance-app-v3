import{s as Et,n as Xe,o as It,b as ct,r as St,a as ut}from"../chunks/DSOgNidj.js";import{S as yt,i as Vt,d as r,a as A,b as l,k as h,l as wt,g as S,c as u,e as m,m as j,j as y,h as d,n as kt,o as dt,s as K,f as L,t as U,p as Dt,q as ae,r as Ue,u as Me,v as ke,w as ft}from"../chunks/BEA7QHMY.js";import{e as qe}from"../chunks/D6YF6ztN.js";import"../chunks/CGYUU-3_.js";import{C as ht}from"../chunks/CFNrZGOd.js";import{g as Tt,a as vt,b as At,c as Nt,d as Ft,e as Lt}from"../chunks/BkX9Jbjf.js";function _t(a,e,t){const i=a.slice();return i[29]=e[t],i}function pt(a,e,t){const i=a.slice();return i[32]=e[t],i}function Ut(a){let e,t,i="‚ö° Quick Add",_,v,f,c,o,s,g,b,C,Y="üí∏ Expense",w,P="üíµ Income",x,T,O,k,D,B,N,z,Q,pe,de,fe,te,H,G,X,V="üíµ Monthly Income",W,E,Z,R=a[5].toLocaleString("en-US",{minimumFractionDigits:2})+"",De,Pe,le,ne,Ze="üí∏ Monthly Expenses",xe,ie,Oe,me=a[6].toLocaleString("en-US",{minimumFractionDigits:2})+"",Ee,Be,se,oe,$e="üìà Balance",He,J,Ye,ge=a[7].toLocaleString("en-US",{minimumFractionDigits:2})+"",Ie,Se,$,re,et="üí≥ Spending by Category",je,be,ye,ee,ce,tt="üìà Income vs Expenses (6 Months)",ze,Ce,Ve,he,Qe,lt,ve=qe(a[2]),F=[];for(let n=0;n<ve.length;n+=1)F[n]=mt(pt(a,ve,n));let q=!a[8]&&gt(),M=a[9].length>0&&bt(a);return{c(){e=d("div"),t=d("h3"),t.textContent=i,_=y(),v=d("div"),f=d("div"),c=d("div"),o=d("input"),s=y(),g=d("div"),b=d("select"),C=d("option"),C.textContent=Y,w=d("option"),w.textContent=P,x=y(),T=d("div"),O=d("div"),k=d("select");for(let n=0;n<F.length;n+=1)F[n].c();D=y(),B=d("div"),N=d("input"),z=y(),Q=d("button"),pe=U("‚ûï Add Transaction"),fe=y(),q&&q.c(),te=y(),H=d("div"),G=d("div"),X=d("div"),X.textContent=V,W=y(),E=d("div"),Z=U("$"),De=U(R),Pe=y(),le=d("div"),ne=d("div"),ne.textContent=Ze,xe=y(),ie=d("div"),Oe=U("$"),Ee=U(me),Be=y(),se=d("div"),oe=d("div"),oe.textContent=$e,He=y(),J=d("div"),Ye=U("$"),Ie=U(ge),Se=y(),$=d("div"),re=d("h3"),re.textContent=et,je=y(),be=d("canvas"),ye=y(),ee=d("div"),ce=d("h3"),ce.textContent=tt,ze=y(),Ce=d("canvas"),Ve=y(),M&&M.c(),he=ft(),this.h()},l(n){e=u(n,"DIV",{class:!0});var p=m(e);t=u(p,"H3",{"data-svelte-h":!0}),j(t)!=="svelte-1mk7xev"&&(t.textContent=i),_=S(p),v=u(p,"DIV",{class:!0});var I=m(v);f=u(I,"DIV",{class:!0});var ue=m(f);c=u(ue,"DIV",{class:!0});var st=m(c);o=u(st,"INPUT",{type:!0,class:!0,placeholder:!0,step:!0,min:!0}),st.forEach(r),s=S(ue),g=u(ue,"DIV",{class:!0});var at=m(g);b=u(at,"SELECT",{class:!0});var Re=m(b);C=u(Re,"OPTION",{"data-svelte-h":!0}),j(C)!=="svelte-i2vc1x"&&(C.textContent=Y),w=u(Re,"OPTION",{"data-svelte-h":!0}),j(w)!=="svelte-15pp2w0"&&(w.textContent=P),Re.forEach(r),at.forEach(r),ue.forEach(r),x=S(I),T=u(I,"DIV",{class:!0});var we=m(T);O=u(we,"DIV",{class:!0});var nt=m(O);k=u(nt,"SELECT",{class:!0});var it=m(k);for(let Ke=0;Ke<F.length;Ke+=1)F[Ke].l(it);it.forEach(r),nt.forEach(r),D=S(we),B=u(we,"DIV",{class:!0});var ot=m(B);N=u(ot,"INPUT",{type:!0,class:!0,placeholder:!0}),ot.forEach(r),we.forEach(r),z=S(I),Q=u(I,"BUTTON",{class:!0});var rt=m(Q);pe=L(rt,"‚ûï Add Transaction"),rt.forEach(r),I.forEach(r),p.forEach(r),fe=S(n),q&&q.l(n),te=S(n),H=u(n,"DIV",{class:!0});var _e=m(H);G=u(_e,"DIV",{class:!0});var Te=m(G);X=u(Te,"DIV",{class:!0,"data-svelte-h":!0}),j(X)!=="svelte-7ifzd0"&&(X.textContent=V),W=S(Te),E=u(Te,"DIV",{class:!0});var Je=m(E);Z=L(Je,"$"),De=L(Je,R),Je.forEach(r),Te.forEach(r),Pe=S(_e),le=u(_e,"DIV",{class:!0});var Ae=m(le);ne=u(Ae,"DIV",{class:!0,"data-svelte-h":!0}),j(ne)!=="svelte-11p87yl"&&(ne.textContent=Ze),xe=S(Ae),ie=u(Ae,"DIV",{class:!0});var Ge=m(ie);Oe=L(Ge,"$"),Ee=L(Ge,me),Ge.forEach(r),Ae.forEach(r),Be=S(_e),se=u(_e,"DIV",{class:!0});var Ne=m(se);oe=u(Ne,"DIV",{class:!0,"data-svelte-h":!0}),j(oe)!=="svelte-jpixsl"&&(oe.textContent=$e),He=S(Ne),J=u(Ne,"DIV",{class:!0});var We=m(J);Ye=L(We,"$"),Ie=L(We,ge),We.forEach(r),Ne.forEach(r),_e.forEach(r),Se=S(n),$=u(n,"DIV",{class:!0});var Fe=m($);re=u(Fe,"H3",{class:!0,"data-svelte-h":!0}),j(re)!=="svelte-7k3xqb"&&(re.textContent=et),je=S(Fe),be=u(Fe,"CANVAS",{}),m(be).forEach(r),Fe.forEach(r),ye=S(n),ee=u(n,"DIV",{class:!0});var Le=m(ee);ce=u(Le,"H3",{class:!0,"data-svelte-h":!0}),j(ce)!=="svelte-14t03is"&&(ce.textContent=tt),ze=S(Le),Ce=u(Le,"CANVAS",{}),m(Ce).forEach(r),Le.forEach(r),Ve=S(n),M&&M.l(n),he=ft(),this.h()},h(){h(o,"type","number"),h(o,"class","input"),h(o,"placeholder","Amount"),h(o,"step","0.01"),h(o,"min","0"),h(c,"class","form-group"),C.__value="expense",ae(C,C.__value),w.__value="income",ae(w,w.__value),h(b,"class","input"),a[0]===void 0&&ut(()=>a[17].call(b)),h(g,"class","form-group"),h(f,"class","form-row"),h(k,"class","input"),a[1]===void 0&&ut(()=>a[18].call(k)),h(O,"class","form-group"),h(N,"type","text"),h(N,"class","input"),h(N,"placeholder","Note (optional)"),h(B,"class","form-group"),h(T,"class","form-row"),h(Q,"class","btn btn-success"),Q.disabled=de=!a[10],h(v,"class","quick-add-form svelte-1v712kd"),h(e,"class","card"),h(X,"class","metric-label"),h(E,"class","metric-value income"),h(G,"class","metric-card"),h(ne,"class","metric-label"),h(ie,"class","metric-value expense"),h(le,"class","metric-card"),h(oe,"class","metric-label"),h(J,"class","metric-value"),Me(J,"income",a[7]>=0),Me(J,"expense",a[7]<0),h(se,"class","metric-card"),h(H,"class","metric-grid"),h(re,"class","svelte-1v712kd"),h($,"class","chart-container svelte-1v712kd"),h(ce,"class","svelte-1v712kd"),h(ee,"class","chart-container svelte-1v712kd")},m(n,p){A(n,e,p),l(e,t),l(e,_),l(e,v),l(v,f),l(f,c),l(c,o),ae(o,a[10]),l(f,s),l(f,g),l(g,b),l(b,C),l(b,w),Ue(b,a[0],!0),l(v,x),l(v,T),l(T,O),l(O,k);for(let I=0;I<F.length;I+=1)F[I]&&F[I].m(k,null);Ue(k,a[1],!0),l(T,D),l(T,B),l(B,N),ae(N,a[11]),l(v,z),l(v,Q),l(Q,pe),A(n,fe,p),q&&q.m(n,p),A(n,te,p),A(n,H,p),l(H,G),l(G,X),l(G,W),l(G,E),l(E,Z),l(E,De),l(H,Pe),l(H,le),l(le,ne),l(le,xe),l(le,ie),l(ie,Oe),l(ie,Ee),l(H,Be),l(H,se),l(se,oe),l(se,He),l(se,J),l(J,Ye),l(J,Ie),A(n,Se,p),A(n,$,p),l($,re),l($,je),l($,be),a[20](be),A(n,ye,p),A(n,ee,p),l(ee,ce),l(ee,ze),l(ee,Ce),a[21](Ce),A(n,Ve,p),M&&M.m(n,p),A(n,he,p),Qe||(lt=[ke(o,"input",a[16]),ke(b,"change",a[17]),ke(k,"change",a[18]),ke(N,"input",a[19]),ke(Q,"click",a[14])],Qe=!0)},p(n,p){if(p[0]&1024&&kt(o.value)!==n[10]&&ae(o,n[10]),p[0]&1&&Ue(b,n[0]),p[0]&4){ve=qe(n[2]);let I;for(I=0;I<ve.length;I+=1){const ue=pt(n,ve,I);F[I]?F[I].p(ue,p):(F[I]=mt(ue),F[I].c(),F[I].m(k,null))}for(;I<F.length;I+=1)F[I].d(1);F.length=ve.length}p[0]&6&&Ue(k,n[1]),p[0]&2048&&N.value!==n[11]&&ae(N,n[11]),p[0]&1024&&de!==(de=!n[10])&&(Q.disabled=de),n[8]?q&&(q.d(1),q=null):q||(q=gt(),q.c(),q.m(te.parentNode,te)),p[0]&32&&R!==(R=n[5].toLocaleString("en-US",{minimumFractionDigits:2})+"")&&K(De,R),p[0]&64&&me!==(me=n[6].toLocaleString("en-US",{minimumFractionDigits:2})+"")&&K(Ee,me),p[0]&128&&ge!==(ge=n[7].toLocaleString("en-US",{minimumFractionDigits:2})+"")&&K(Ie,ge),p[0]&128&&Me(J,"income",n[7]>=0),p[0]&128&&Me(J,"expense",n[7]<0),n[9].length>0?M?M.p(n,p):(M=bt(n),M.c(),M.m(he.parentNode,he)):M&&(M.d(1),M=null)},d(n){n&&(r(e),r(fe),r(te),r(H),r(Se),r($),r(ye),r(ee),r(Ve),r(he)),Dt(F,n),q&&q.d(n),a[20](null),a[21](null),M&&M.d(n),Qe=!1,St(lt)}}}function Mt(a){let e,t;return{c(){e=d("div"),t=U(a[4]),this.h()},l(i){e=u(i,"DIV",{class:!0});var _=m(e);t=L(_,a[4]),_.forEach(r),this.h()},h(){h(e,"class","error")},m(i,_){A(i,e,_),l(e,t)},p(i,_){_[0]&16&&K(t,i[4])},d(i){i&&r(e)}}}function qt(a){let e,t="Loading dashboard...‚è≥";return{c(){e=d("div"),e.textContent=t,this.h()},l(i){e=u(i,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-hrlzf0"&&(e.textContent=t),this.h()},h(){h(e,"class","loading")},m(i,_){A(i,e,_)},p:Xe,d(i){i&&r(e)}}}function mt(a){let e,t=a[32].icon+"",i,_,v=a[32].name+"",f,c;return{c(){e=d("option"),i=U(t),_=y(),f=U(v),this.h()},l(o){e=u(o,"OPTION",{});var s=m(e);i=L(s,t),_=S(s),f=L(s,v),s.forEach(r),this.h()},h(){e.__value=c=a[32].id,ae(e,e.__value)},m(o,s){A(o,e,s),l(e,i),l(e,_),l(e,f)},p(o,s){s[0]&4&&t!==(t=o[32].icon+"")&&K(i,t),s[0]&4&&v!==(v=o[32].name+"")&&K(f,v),s[0]&4&&c!==(c=o[32].id)&&(e.__value=c,ae(e,e.__value))},d(o){o&&r(e)}}}function gt(a){let e,t='<h2 class="svelte-1v712kd">üéâ Welcome to Jim&#39;s Finance Tracker!</h2> <p>Get started in just a few steps:</p> <ol class="svelte-1v712kd"><li class="svelte-1v712kd">Use <strong>Quick Add</strong> above to add your first transaction</li> <li class="svelte-1v712kd">Set up recurring bills in <strong>Bills</strong></li> <li class="svelte-1v712kd">Import your bank transactions via <strong>Import CSV</strong></li></ol> <p class="highlight svelte-1v712kd">Add your first transaction above to get started!</p>';return{c(){e=d("div"),e.innerHTML=t,this.h()},l(i){e=u(i,"DIV",{class:!0,"data-svelte-h":!0}),j(e)!=="svelte-18qxats"&&(e.innerHTML=t),this.h()},h(){h(e,"class","card welcome-card svelte-1v712kd")},m(i,_){A(i,e,_)},d(i){i&&r(e)}}}function bt(a){let e,t,i="üìÖ Upcoming Bills This Month",_,v=qe(a[9]),f=[];for(let c=0;c<v.length;c+=1)f[c]=Ct(_t(a,v,c));return{c(){e=d("div"),t=d("h3"),t.textContent=i,_=y();for(let c=0;c<f.length;c+=1)f[c].c();this.h()},l(c){e=u(c,"DIV",{class:!0});var o=m(e);t=u(o,"H3",{"data-svelte-h":!0}),j(t)!=="svelte-12l6170"&&(t.textContent=i),_=S(o);for(let s=0;s<f.length;s+=1)f[s].l(o);o.forEach(r),this.h()},h(){h(e,"class","card")},m(c,o){A(c,e,o),l(e,t),l(e,_);for(let s=0;s<f.length;s+=1)f[s]&&f[s].m(e,null)},p(c,o){if(o[0]&512){v=qe(c[9]);let s;for(s=0;s<v.length;s+=1){const g=_t(c,v,s);f[s]?f[s].p(g,o):(f[s]=Ct(g),f[s].c(),f[s].m(e,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=v.length}},d(c){c&&r(e),Dt(f,c)}}}function Ct(a){let e,t,i,_=a[29].name+"",v,f,c,o,s=a[29].amount.toLocaleString("en-US",{minimumFractionDigits:2})+"",g,b,C,Y,w=a[29].due_day+"",P,x=(["st","nd","rd"][((a[29].due_day+90)%100-10)%10-1]||"th")+"",T,O;return{c(){e=d("div"),t=d("span"),i=U("üîî "),v=U(_),f=y(),c=d("span"),o=U("-$"),g=U(s),b=y(),C=d("span"),Y=U("Due "),P=U(w),T=U(x),O=y(),this.h()},l(k){e=u(k,"DIV",{class:!0});var D=m(e);t=u(D,"SPAN",{});var B=m(t);i=L(B,"üîî "),v=L(B,_),B.forEach(r),f=S(D),c=u(D,"SPAN",{class:!0});var N=m(c);o=L(N,"-$"),g=L(N,s),N.forEach(r),b=S(D),C=u(D,"SPAN",{class:!0});var z=m(C);Y=L(z,"Due "),P=L(z,w),T=L(z,x),z.forEach(r),O=S(D),D.forEach(r),this.h()},h(){h(c,"class","expense"),h(C,"class","due-date svelte-1v712kd"),h(e,"class","bill-item svelte-1v712kd")},m(k,D){A(k,e,D),l(e,t),l(t,i),l(t,v),l(e,f),l(e,c),l(c,o),l(c,g),l(e,b),l(e,C),l(C,Y),l(C,P),l(C,T),l(e,O)},p(k,D){D[0]&512&&_!==(_=k[29].name+"")&&K(v,_),D[0]&512&&s!==(s=k[29].amount.toLocaleString("en-US",{minimumFractionDigits:2})+"")&&K(g,s),D[0]&512&&w!==(w=k[29].due_day+"")&&K(P,w),D[0]&512&&x!==(x=(["st","nd","rd"][((k[29].due_day+90)%100-10)%10-1]||"th")+"")&&K(T,x)},d(k){k&&r(e)}}}function Pt(a){let e,t,i,_="üìä Dashboard",v;function f(s,g){return s[3]?qt:s[4]?Mt:Ut}let c=f(a),o=c(a);return{c(){e=y(),t=d("div"),i=d("h1"),i.textContent=_,v=y(),o.c(),this.h()},l(s){wt("svelte-14i2b12",document.head).forEach(r),e=S(s),t=u(s,"DIV",{class:!0});var b=m(t);i=u(b,"H1",{class:!0,"data-svelte-h":!0}),j(i)!=="svelte-15v4he8"&&(i.textContent=_),v=S(b),o.l(b),b.forEach(r),this.h()},h(){document.title="Dashboard - Jim's Finance Tracker",h(i,"class","page-title"),h(t,"class","page")},m(s,g){A(s,e,g),A(s,t,g),l(t,i),l(t,v),o.m(t,null)},p(s,g){c===(c=f(s))&&o?o.p(s,g):(o.d(1),o=c(s),o&&(o.c(),o.m(t,null)))},i:Xe,o:Xe,d(s){s&&(r(e),r(t)),o.d()}}}function xt(a,e,t){let i=!0,_="",v=0,f=0,c=0,o=!1,s=[],g="",b="expense",C=null,Y="",w=[],P=[],x,T,O,k;const D=new Date,B=D.getFullYear(),N=D.getMonth()+1;It(async()=>{try{t(15,w=await Tt()),await z()}catch(V){t(4,_=V.message)}finally{t(3,i=!1)}});async function z(){const V=await vt(B,N);t(5,v=V.total_income),t(6,f=V.total_expense),t(7,c=v-f);const W=await At(1);t(8,o=W.length>0);const E=await Nt(),Z=D.getDate();t(9,s=E.filter(R=>R.due_day>=Z&&R.is_active===1)),await Q()}async function Q(){const V=await Ft("expense",B,N);O&&O.destroy(),V.length>0&&(O=new ht(x,{type:"doughnut",data:{labels:V.map(E=>`${E.icon} ${E.name}`),datasets:[{data:V.map(E=>E.total),backgroundColor:["#3b82f6","#ef4444","#22c55e","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#f97316","#6366f1","#84cc16"]}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{color:"#f8fafc",font:{size:11}}}}}}));const W=[];for(let E=5;E>=0;E--){const Z=new Date(D.getFullYear(),D.getMonth()-E,1),R=await vt(Z.getFullYear(),Z.getMonth()+1);W.push({month:Z.toLocaleDateString("en-US",{month:"short"}),income:R.total_income,expense:R.total_expense})}k&&k.destroy(),k=new ht(T,{type:"bar",data:{labels:W.map(E=>E.month),datasets:[{label:"Income",data:W.map(E=>E.income),backgroundColor:"#22c55e"},{label:"Expenses",data:W.map(E=>E.expense),backgroundColor:"#ef4444"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#f8fafc"}}},scales:{x:{ticks:{color:"#94a3b8"},grid:{color:"#334155"}},y:{ticks:{color:"#94a3b8"},grid:{color:"#334155"}}}}})}async function pe(){if(!(!g||!C))try{await Lt(D.toISOString().split("T")[0],parseFloat(g),C,b,Y),t(10,g=""),t(11,Y=""),await z()}catch(V){t(4,_=V.message)}}function de(){g=kt(this.value),t(10,g)}function fe(){b=dt(this),t(0,b)}function te(){C=dt(this),t(1,C),t(2,P),t(15,w),t(0,b),t(2,P),t(15,w),t(0,b)}function H(){Y=this.value,t(11,Y)}function G(V){ct[V?"unshift":"push"](()=>{x=V,t(12,x)})}function X(V){ct[V?"unshift":"push"](()=>{T=V,t(13,T)})}return a.$$.update=()=>{a.$$.dirty[0]&32769&&t(2,P=w.filter(V=>b==="income"?V.is_income===1:V.is_income===0)),a.$$.dirty[0]&6&&P.length>0&&!C&&t(1,C=P[0].id)},[b,C,P,i,_,v,f,c,o,s,g,Y,x,T,pe,w,de,fe,te,H,G,X]}class Qt extends yt{constructor(e){super(),Vt(this,e,xt,Pt,Et,{},null,[-1,-1])}}export{Qt as component};
