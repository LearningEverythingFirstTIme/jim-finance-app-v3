import{s as $e,n as ce,o as et,b as Ue,r as tt,a as lt}from"../chunks/DSOgNidj.js";import{S as at,i as st,d as o,a as x,b as n,k as p,l as nt,g as E,c as i,e as b,m as U,j as y,h as d,o as ot,s as G,f as j,t as q,p as ze,r as Je,u as Q,v as Ge,q as rt}from"../chunks/BEA7QHMY.js";import{e as ke}from"../chunks/D6YF6ztN.js";import{C as Ke}from"../chunks/CFNrZGOd.js";import{a as ct,d as it}from"../chunks/B0jSzsKY.js";function Qe(a,e,t){const s=a.slice();return s[18]=e[t],s}function We(a,e,t){const s=a.slice();return s[21]=e[t],s}function dt(a){let e,t,s="Select Year",u,v,I,m,f,h,C="Total Income",D,A,M=R(a[2])+"",k,N,L,H,T="Total Expenses",g,B,r=R(a[1])+"",V,te,K,W,Me="Annual Net",Ie,O,ie=R(a[9])+"",he,fe,z,le,Ve,ue,Te,ae,X,se,He="<tr><th>Month</th> <th>Income</th> <th>Expenses</th> <th>Net</th></tr>",Se,ne,ve,J,Z,Ne="Monthly Trend",we,de,_e,P,$,Ye="Top Spending Categories",xe,Ae,Re,oe=ke(a[10]),S=[];for(let l=0;l<oe.length;l+=1)S[l]=Xe(We(a,oe,l));let re=ke(a[0]),w=[];for(let l=0;l<re.length;l+=1)w[l]=Ze(Qe(a,re,l));function Be(l,_){return l[6].length>0?vt:ut}let me=Be(a),F=me(a);return{c(){e=d("div"),t=d("label"),t.textContent=s,u=y(),v=d("select");for(let l=0;l<S.length;l+=1)S[l].c();I=y(),m=d("div"),f=d("div"),h=d("div"),h.textContent=C,D=y(),A=d("div"),k=q(M),N=y(),L=d("div"),H=d("div"),H.textContent=T,g=y(),B=d("div"),V=q(r),te=y(),K=d("div"),W=d("div"),W.textContent=Me,Ie=y(),O=d("div"),he=q(ie),fe=y(),z=d("div"),le=d("h3"),Ve=q("Monthly Summary for "),ue=q(a[5]),Te=y(),ae=d("div"),X=d("table"),se=d("thead"),se.innerHTML=He,Se=y(),ne=d("tbody");for(let l=0;l<w.length;l+=1)w[l].c();ve=y(),J=d("div"),Z=d("h3"),Z.textContent=Ne,we=y(),de=d("canvas"),_e=y(),P=d("div"),$=d("h3"),$.textContent=Ye,xe=y(),F.c(),this.h()},l(l){e=i(l,"DIV",{class:!0});var _=b(e);t=i(_,"LABEL",{"data-svelte-h":!0}),U(t)!=="svelte-o05uh5"&&(t.textContent=s),u=E(_),v=i(_,"SELECT",{class:!0});var c=b(v);for(let ee=0;ee<S.length;ee+=1)S[ee].l(c);c.forEach(o),_.forEach(o),I=E(l),m=i(l,"DIV",{class:!0});var Y=b(m);f=i(Y,"DIV",{class:!0});var pe=b(f);h=i(pe,"DIV",{class:!0,"data-svelte-h":!0}),U(h)!=="svelte-1m3p30d"&&(h.textContent=C),D=E(pe),A=i(pe,"DIV",{class:!0});var Fe=b(A);k=j(Fe,M),Fe.forEach(o),pe.forEach(o),N=E(Y),L=i(Y,"DIV",{class:!0});var be=b(L);H=i(be,"DIV",{class:!0,"data-svelte-h":!0}),U(H)!=="svelte-17143ev"&&(H.textContent=T),g=E(be),B=i(be,"DIV",{class:!0});var je=b(B);V=j(je,r),je.forEach(o),be.forEach(o),te=E(Y),K=i(Y,"DIV",{class:!0});var ge=b(K);W=i(ge,"DIV",{class:!0,"data-svelte-h":!0}),U(W)!=="svelte-1hnqnfc"&&(W.textContent=Me),Ie=E(ge),O=i(ge,"DIV",{class:!0});var qe=b(O);he=j(qe,ie),qe.forEach(o),ge.forEach(o),Y.forEach(o),fe=E(l),z=i(l,"DIV",{class:!0});var Ce=b(z);le=i(Ce,"H3",{});var Le=b(le);Ve=j(Le,"Monthly Summary for "),ue=j(Le,a[5]),Le.forEach(o),Te=E(Ce),ae=i(Ce,"DIV",{class:!0});var Oe=b(ae);X=i(Oe,"TABLE",{});var Ee=b(X);se=i(Ee,"THEAD",{"data-svelte-h":!0}),U(se)!=="svelte-sew6cu"&&(se.innerHTML=He),Se=E(Ee),ne=i(Ee,"TBODY",{});var Pe=b(ne);for(let ee=0;ee<w.length;ee+=1)w[ee].l(Pe);Pe.forEach(o),Ee.forEach(o),Oe.forEach(o),Ce.forEach(o),ve=E(l),J=i(l,"DIV",{class:!0});var ye=b(J);Z=i(ye,"H3",{class:!0,"data-svelte-h":!0}),U(Z)!=="svelte-wiw1ws"&&(Z.textContent=Ne),we=E(ye),de=i(ye,"CANVAS",{}),b(de).forEach(o),ye.forEach(o),_e=E(l),P=i(l,"DIV",{class:!0});var De=b(P);$=i(De,"H3",{class:!0,"data-svelte-h":!0}),U($)!=="svelte-1vkmkoj"&&($.textContent=Ye),xe=E(De),F.l(De),De.forEach(o),this.h()},h(){p(v,"class","input"),a[5]===void 0&&lt(()=>a[12].call(v)),p(e,"class","card"),p(h,"class","metric-label"),p(A,"class","metric-value income"),p(f,"class","metric-card"),p(H,"class","metric-label"),p(B,"class","metric-value expense"),p(L,"class","metric-card"),p(W,"class","metric-label"),p(O,"class","metric-value"),Q(O,"income",a[9]>=0),Q(O,"expense",a[9]<0),p(K,"class","metric-card"),p(m,"class","metric-grid"),p(ae,"class","table-container"),p(z,"class","card"),p(Z,"class","svelte-n59edb"),p(J,"class","chart-container svelte-n59edb"),p($,"class","svelte-n59edb"),p(P,"class","chart-container svelte-n59edb")},m(l,_){x(l,e,_),n(e,t),n(e,u),n(e,v);for(let c=0;c<S.length;c+=1)S[c]&&S[c].m(v,null);Je(v,a[5],!0),x(l,I,_),x(l,m,_),n(m,f),n(f,h),n(f,D),n(f,A),n(A,k),n(m,N),n(m,L),n(L,H),n(L,g),n(L,B),n(B,V),n(m,te),n(m,K),n(K,W),n(K,Ie),n(K,O),n(O,he),x(l,fe,_),x(l,z,_),n(z,le),n(le,Ve),n(le,ue),n(z,Te),n(z,ae),n(ae,X),n(X,se),n(X,Se),n(X,ne);for(let c=0;c<w.length;c+=1)w[c]&&w[c].m(ne,null);x(l,ve,_),x(l,J,_),n(J,Z),n(J,we),n(J,de),a[13](de),x(l,_e,_),x(l,P,_),n(P,$),n(P,xe),F.m(P,null),Ae||(Re=[Ge(v,"change",a[12]),Ge(v,"change",a[11])],Ae=!0)},p(l,_){if(_&1024){oe=ke(l[10]);let c;for(c=0;c<oe.length;c+=1){const Y=We(l,oe,c);S[c]?S[c].p(Y,_):(S[c]=Xe(Y),S[c].c(),S[c].m(v,null))}for(;c<S.length;c+=1)S[c].d(1);S.length=oe.length}if(_&1056&&Je(v,l[5]),_&4&&M!==(M=R(l[2])+"")&&G(k,M),_&2&&r!==(r=R(l[1])+"")&&G(V,r),_&512&&ie!==(ie=R(l[9])+"")&&G(he,ie),_&512&&Q(O,"income",l[9]>=0),_&512&&Q(O,"expense",l[9]<0),_&32&&G(ue,l[5]),_&1){re=ke(l[0]);let c;for(c=0;c<re.length;c+=1){const Y=Qe(l,re,c);w[c]?w[c].p(Y,_):(w[c]=Ze(Y),w[c].c(),w[c].m(ne,null))}for(;c<w.length;c+=1)w[c].d(1);w.length=re.length}me===(me=Be(l))&&F?F.p(l,_):(F.d(1),F=me(l),F&&(F.c(),F.m(P,null)))},d(l){l&&(o(e),o(I),o(m),o(fe),o(z),o(ve),o(J),o(_e),o(P)),ze(S,l),ze(w,l),a[13](null),F.d(),Ae=!1,tt(Re)}}}function ht(a){let e,t;return{c(){e=d("div"),t=q(a[4]),this.h()},l(s){e=i(s,"DIV",{class:!0});var u=b(e);t=j(u,a[4]),u.forEach(o),this.h()},h(){p(e,"class","error")},m(s,u){x(s,e,u),n(e,t)},p(s,u){u&16&&G(t,s[4])},d(s){s&&o(e)}}}function ft(a){let e,t="Loading reports...â³";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=i(s,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-16180az"&&(e.textContent=t),this.h()},h(){p(e,"class","loading")},m(s,u){x(s,e,u)},p:ce,d(s){s&&o(e)}}}function Xe(a){let e,t=a[21]+"",s;return{c(){e=d("option"),s=q(t),this.h()},l(u){e=i(u,"OPTION",{});var v=b(e);s=j(v,t),v.forEach(o),this.h()},h(){e.__value=a[21],rt(e,e.__value)},m(u,v){x(u,e,v),n(e,s)},p:ce,d(u){u&&o(e)}}}function Ze(a){let e,t,s=a[18].month+"",u,v,I,m=R(a[18].income)+"",f,h,C,D=R(a[18].expense)+"",A,M,k,N=R(a[18].net)+"",L,H;return{c(){e=d("tr"),t=d("td"),u=q(s),v=y(),I=d("td"),f=q(m),h=y(),C=d("td"),A=q(D),M=y(),k=d("td"),L=q(N),H=y(),this.h()},l(T){e=i(T,"TR",{});var g=b(e);t=i(g,"TD",{});var B=b(t);u=j(B,s),B.forEach(o),v=E(g),I=i(g,"TD",{class:!0});var r=b(I);f=j(r,m),r.forEach(o),h=E(g),C=i(g,"TD",{class:!0});var V=b(C);A=j(V,D),V.forEach(o),M=E(g),k=i(g,"TD",{class:!0});var te=b(k);L=j(te,N),te.forEach(o),H=E(g),g.forEach(o),this.h()},h(){p(I,"class","income svelte-n59edb"),p(C,"class","expense svelte-n59edb"),p(k,"class","svelte-n59edb"),Q(k,"income",a[18].net>=0),Q(k,"expense",a[18].net<0)},m(T,g){x(T,e,g),n(e,t),n(t,u),n(e,v),n(e,I),n(I,f),n(e,h),n(e,C),n(C,A),n(e,M),n(e,k),n(k,L),n(e,H)},p(T,g){g&1&&s!==(s=T[18].month+"")&&G(u,s),g&1&&m!==(m=R(T[18].income)+"")&&G(f,m),g&1&&D!==(D=R(T[18].expense)+"")&&G(A,D),g&1&&N!==(N=R(T[18].net)+"")&&G(L,N),g&1&&Q(k,"income",T[18].net>=0),g&1&&Q(k,"expense",T[18].net<0)},d(T){T&&o(e)}}}function ut(a){let e,t="No expense data for this year";return{c(){e=d("p"),e.textContent=t,this.h()},l(s){e=i(s,"P",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-21pek1"&&(e.textContent=t),this.h()},h(){p(e,"class","empty-state")},m(s,u){x(s,e,u)},p:ce,d(s){s&&o(e)}}}function vt(a){let e;return{c(){e=d("canvas")},l(t){e=i(t,"CANVAS",{}),b(e).forEach(o)},m(t,s){x(t,e,s),a[14](e)},p:ce,d(t){t&&o(e),a[14](null)}}}function _t(a){let e,t,s,u="ðŸ“ˆ Reports",v;function I(h,C){return h[3]?ft:h[4]?ht:dt}let m=I(a),f=m(a);return{c(){e=y(),t=d("div"),s=d("h1"),s.textContent=u,v=y(),f.c(),this.h()},l(h){nt("svelte-5jgvn5",document.head).forEach(o),e=E(h),t=i(h,"DIV",{class:!0});var D=b(t);s=i(D,"H1",{class:!0,"data-svelte-h":!0}),U(s)!=="svelte-1xb71hn"&&(s.textContent=u),v=E(D),f.l(D),D.forEach(o),this.h()},h(){document.title="Reports - Jim's Finance Tracker",p(s,"class","page-title"),p(t,"class","page")},m(h,C){x(h,e,C),x(h,t,C),n(t,s),n(t,v),f.m(t,null)},p(h,[C]){m===(m=I(h))&&f?f.p(h,C):(f.d(1),f=m(h),f&&(f.c(),f.m(t,null)))},i:ce,o:ce,d(h){h&&(o(e),o(t)),f.d()}}}function R(a){return a.toLocaleString("en-US",{style:"currency",currency:"USD"})}function mt(a,e,t){let s,u,v,I=!0,m="",f=new Date().getFullYear(),h=[],C=[],D,A,M,k;const N=Array.from({length:5},(r,V)=>new Date().getFullYear()-V);et(async()=>{await L()});async function L(){t(3,I=!0),t(4,m="");try{t(0,h=[]);for(let r=1;r<=12&&!(f===new Date().getFullYear()&&r>new Date().getMonth()+1);r++){const V=await ct(f,r);h.push({month:new Date(f,r-1).toLocaleDateString("en-US",{month:"short"}),income:V.total_income,expense:V.total_expense,net:V.total_income-V.total_expense})}t(6,C=await it("expense",f)),H()}catch(r){t(4,m=r.message)}finally{t(3,I=!1)}}function H(){M&&M.destroy(),M=new Ke(D,{type:"bar",data:{labels:h.map(r=>r.month),datasets:[{label:"Income",data:h.map(r=>r.income),backgroundColor:"#22c55e"},{label:"Expenses",data:h.map(r=>r.expense),backgroundColor:"#ef4444"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#f8fafc"}}},scales:{x:{ticks:{color:"#94a3b8"},grid:{color:"#334155"}},y:{ticks:{color:"#94a3b8"},grid:{color:"#334155"}}}}}),k&&k.destroy(),C.length>0&&(k=new Ke(A,{type:"bar",data:{labels:C.slice(0,10).map(r=>`${r.icon} ${r.name}`),datasets:[{label:"Spending",data:C.slice(0,10).map(r=>r.total),backgroundColor:"#3b82f6"}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{x:{ticks:{color:"#94a3b8"},grid:{color:"#334155"}},y:{ticks:{color:"#f8fafc"},grid:{display:!1}}}}}))}function T(){f=ot(this),t(5,f),t(10,N)}function g(r){Ue[r?"unshift":"push"](()=>{D=r,t(7,D)})}function B(r){Ue[r?"unshift":"push"](()=>{A=r,t(8,A)})}return a.$$.update=()=>{a.$$.dirty&1&&t(2,s=h.reduce((r,V)=>r+V.income,0)),a.$$.dirty&1&&t(1,u=h.reduce((r,V)=>r+V.expense,0)),a.$$.dirty&6&&t(9,v=s-u)},[h,u,s,I,m,f,C,D,A,v,N,L,T,g,B]}class yt extends at{constructor(e){super(),st(this,e,mt,_t,$e,{})}}export{yt as component};
