import{s as me,n as G,o as ge,r as ve,a as se}from"../chunks/DSOgNidj.js";import{S as be,i as ke,d as f,s as F,a as U,b as r,k as O,l as Ce,g as j,c as v,e as P,m as B,f as A,j as z,h as p,t as H,o as ie,p as pe,u as x,v as K,r as W,x as oe,q as $,w as ye}from"../chunks/BTTWjJDS.js";import{e as ee}from"../chunks/D6YF6ztN.js";import{b as Ee,g as Te,j as De}from"../chunks/BlK5NUL5.js";function re(a,e,l){const t=a.slice();t[16]=e[l],t[19]=l;const n=t[7](t[16].category_id);return t[17]=n,t}function ce(a,e,l){const t=a.slice();return t[20]=e[l],t}function Ie(a){let e,l,t,n="All Types",s,i="ðŸ’µ Income",o,C="ðŸ’¸ Expense",E,u,d,L="All Time",w,b,k,T,m=ee(a[6]),_=[];for(let c=0;c<m.length;c+=1)_[c]=ue(ce(a,m,c));function h(c,V){return c[4].length===0?we:Ve}let S=h(a),D=S(a);return{c(){e=p("div"),l=p("select"),t=p("option"),t.textContent=n,s=p("option"),s.textContent=i,o=p("option"),o.textContent=C,E=z(),u=p("select"),d=p("option"),d.textContent=L;for(let c=0;c<_.length;c+=1)_[c].c();w=z(),D.c(),b=oe(),this.h()},l(c){e=v(c,"DIV",{class:!0});var V=P(e);l=v(V,"SELECT",{class:!0});var g=P(l);t=v(g,"OPTION",{"data-svelte-h":!0}),B(t)!=="svelte-7jahaz"&&(t.textContent=n),s=v(g,"OPTION",{"data-svelte-h":!0}),B(s)!=="svelte-15pp2w0"&&(s.textContent=i),o=v(g,"OPTION",{"data-svelte-h":!0}),B(o)!=="svelte-i2vc1x"&&(o.textContent=C),g.forEach(f),E=j(V),u=v(V,"SELECT",{class:!0});var y=P(u);d=v(y,"OPTION",{"data-svelte-h":!0}),B(d)!=="svelte-a5vk5j"&&(d.textContent=L);for(let J=0;J<_.length;J+=1)_[J].l(y);y.forEach(f),V.forEach(f),w=j(c),D.l(c),b=oe(),this.h()},h(){t.__value="all",W(t,t.__value),s.__value="income",W(s,s.__value),o.__value="expense",W(o,o.__value),O(l,"class","input"),a[0]===void 0&&se(()=>a[10].call(l)),d.__value="all",W(d,d.__value),O(u,"class","input"),a[1]===void 0&&se(()=>a[11].call(u)),O(e,"class","filter-row animate-fade-in")},m(c,V){U(c,e,V),r(e,l),r(l,t),r(l,s),r(l,o),x(l,a[0],!0),r(e,E),r(e,u),r(u,d);for(let g=0;g<_.length;g+=1)_[g]&&_[g].m(u,null);x(u,a[1],!0),U(c,w,V),D.m(c,V),U(c,b,V),k||(T=[K(l,"change",a[10]),K(u,"change",a[11])],k=!0)},p(c,V){if(V&1&&x(l,c[0]),V&64){m=ee(c[6]);let g;for(g=0;g<m.length;g+=1){const y=ce(c,m,g);_[g]?_[g].p(y,V):(_[g]=ue(y),_[g].c(),_[g].m(u,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=m.length}V&66&&x(u,c[1]),S===(S=h(c))&&D?D.p(c,V):(D.d(1),D=S(c),D&&(D.c(),D.m(b.parentNode,b)))},d(c){c&&(f(e),f(w),f(b)),pe(_,c),D.d(c),k=!1,ve(T)}}}function Oe(a){let e,l;return{c(){e=p("div"),l=H(a[3]),this.h()},l(t){e=v(t,"DIV",{class:!0});var n=P(e);l=A(n,a[3]),n.forEach(f),this.h()},h(){O(e,"class","error")},m(t,n){U(t,e,n),r(e,l)},p(t,n){n&8&&F(l,t[3])},d(t){t&&f(e)}}}function Se(a){let e,l="Loading transactions...";return{c(){e=p("div"),e.textContent=l,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-1a20ex6"&&(e.textContent=l),this.h()},h(){O(e,"class","loading")},m(t,n){U(t,e,n)},p:G,d(t){t&&f(e)}}}function ue(a){let e,l=a[20].label+"",t;return{c(){e=p("option"),t=H(l),this.h()},l(n){e=v(n,"OPTION",{});var s=P(e);t=A(s,l),s.forEach(f),this.h()},h(){e.__value=a[20].value,W(e,e.__value)},m(n,s){U(n,e,s),r(e,t)},p:G,d(n){n&&f(e)}}}function Ve(a){let e,l=ee(a[4]),t=[];for(let n=0;n<l.length;n+=1)t[n]=_e(re(a,l,n));return{c(){e=p("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=v(n,"DIV",{class:!0});var s=P(e);for(let i=0;i<t.length;i+=1)t[i].l(s);s.forEach(f),this.h()},h(){O(e,"class","transactions-list svelte-1763brm")},m(n,s){U(n,e,s);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null)},p(n,s){if(s&432){l=ee(n[4]);let i;for(i=0;i<l.length;i+=1){const o=re(n,l,i);t[i]?t[i].p(o,s):(t[i]=_e(o),t[i].c(),t[i].m(e,null))}for(;i<t.length;i+=1)t[i].d(1);t.length=l.length}},d(n){n&&f(e),pe(t,n)}}}function we(a){let e,l='<div class="empty-state-icon">ðŸ“‹</div> <p>No transactions found.</p> <a href="/add" class="btn btn-primary svelte-1763brm" style="margin-top: 1rem;">Add Transaction</a>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-adh6tk"&&(e.innerHTML=l),this.h()},h(){O(e,"class","empty-state animate-fade-in svelte-1763brm")},m(t,n){U(t,e,n)},p:G,d(t){t&&f(e)}}}function fe(a){let e,l=a[16].notes+"",t;return{c(){e=H("â€¢ "),t=H(l)},l(n){e=A(n,"â€¢ "),t=A(n,l)},m(n,s){U(n,e,s),U(n,t,s)},p(n,s){s&16&&l!==(l=n[16].notes+"")&&F(t,l)},d(n){n&&(f(e),f(t))}}}function Ne(a){let e,l="ðŸ—‘ï¸",t,n;function s(){return a[14](a[16])}return{c(){e=p("button"),e.textContent=l,this.h()},l(i){e=v(i,"BUTTON",{class:!0,"data-svelte-h":!0}),B(e)!=="svelte-197wlh0"&&(e.textContent=l),this.h()},h(){O(e,"class","delete-btn")},m(i,o){U(i,e,o),t||(n=K(e,"click",s),t=!0)},p(i,o){a=i},d(i){i&&f(e),t=!1,n()}}}function Pe(a){let e,l,t="âœ“",n,s,i="âœ•",o,C;function E(){return a[12](a[16])}return{c(){e=p("div"),l=p("button"),l.textContent=t,n=z(),s=p("button"),s.textContent=i,this.h()},l(u){e=v(u,"DIV",{class:!0});var d=P(e);l=v(d,"BUTTON",{class:!0,"data-svelte-h":!0}),B(l)!=="svelte-1wpriza"&&(l.textContent=t),n=j(d),s=v(d,"BUTTON",{class:!0,"data-svelte-h":!0}),B(s)!=="svelte-14t6zjs"&&(s.textContent=i),d.forEach(f),this.h()},h(){O(l,"class","btn btn-danger btn-sm"),O(s,"class","btn btn-secondary btn-sm"),O(e,"class","delete-confirm svelte-1763brm")},m(u,d){U(u,e,d),r(e,l),r(e,n),r(e,s),o||(C=[K(l,"click",E),K(s,"click",a[13])],o=!0)},p(u,d){a=u},d(u){u&&f(e),o=!1,ve(C)}}}function _e(a){var le,ne;let e,l,t,n=(((le=a[17])==null?void 0:le.icon)||"â“")+"",s,i,o,C,E=(((ne=a[17])==null?void 0:ne.name)||"Unknown")+"",u,d,L,w=he(a[16].date)+"",b,k,T,m,_=a[16].transaction_type==="income"?"+":"-",h,S,D=de(a[16].amount)+"",c,V,g,y=a[16].notes&&fe(a);function J(I,N){return I[5]===I[16].id?Pe:Ne}let Q=J(a),M=Q(a);return{c(){e=p("div"),l=p("div"),t=p("div"),s=H(n),i=z(),o=p("div"),C=p("h4"),u=H(E),d=z(),L=p("p"),b=H(w),y&&y.c(),k=z(),T=p("div"),m=p("span"),h=H(_),S=H(`
                $`),c=H(D),V=z(),M.c(),g=z(),this.h()},l(I){e=v(I,"DIV",{class:!0,style:!0});var N=P(e);l=v(N,"DIV",{class:!0});var q=P(l);t=v(q,"DIV",{class:!0});var R=P(t);s=A(R,n),R.forEach(f),i=j(q),o=v(q,"DIV",{class:!0});var X=P(o);C=v(X,"H4",{});var ae=P(C);u=A(ae,E),ae.forEach(f),d=j(X),L=v(X,"P",{});var te=P(L);b=A(te,w),y&&y.l(te),te.forEach(f),X.forEach(f),q.forEach(f),k=j(N),T=v(N,"DIV",{class:!0});var Y=P(T);m=v(Y,"SPAN",{class:!0});var Z=P(m);h=A(Z,_),S=A(Z,`
                $`),c=A(Z,D),Z.forEach(f),V=j(Y),M.l(Y),Y.forEach(f),g=j(N),N.forEach(f),this.h()},h(){O(t,"class","transaction-icon"),O(o,"class","transaction-details"),O(l,"class","transaction-info"),O(m,"class","transaction-amount"),$(m,"income",a[16].transaction_type==="income"),$(m,"expense",a[16].transaction_type==="expense"),O(T,"class","transaction-actions"),O(e,"class","transaction-item animate-fade-in"),ye(e,"animation-delay",a[19]*.03+"s")},m(I,N){U(I,e,N),r(e,l),r(l,t),r(t,s),r(l,i),r(l,o),r(o,C),r(C,u),r(o,d),r(o,L),r(L,b),y&&y.m(L,null),r(e,k),r(e,T),r(T,m),r(m,h),r(m,S),r(m,c),r(T,V),M.m(T,null),r(e,g)},p(I,N){var q,R;N&16&&n!==(n=(((q=I[17])==null?void 0:q.icon)||"â“")+"")&&F(s,n),N&16&&E!==(E=(((R=I[17])==null?void 0:R.name)||"Unknown")+"")&&F(u,E),N&16&&w!==(w=he(I[16].date)+"")&&F(b,w),I[16].notes?y?y.p(I,N):(y=fe(I),y.c(),y.m(L,null)):y&&(y.d(1),y=null),N&16&&_!==(_=I[16].transaction_type==="income"?"+":"-")&&F(h,_),N&16&&D!==(D=de(I[16].amount)+"")&&F(c,D),N&16&&$(m,"income",I[16].transaction_type==="income"),N&16&&$(m,"expense",I[16].transaction_type==="expense"),Q===(Q=J(I))&&M?M.p(I,N):(M.d(1),M=Q(I),M&&(M.c(),M.m(T,null)))},d(I){I&&f(e),y&&y.d(),M.d()}}}function Le(a){let e,l,t,n,s="Transaction History",i,o,C=a[4].length+"",E,u,d;function L(k,T){return k[2]?Se:k[3]?Oe:Ie}let w=L(a),b=w(a);return{c(){e=z(),l=p("div"),t=p("header"),n=p("h1"),n.textContent=s,i=z(),o=p("p"),E=H(C),u=H(" transactions"),d=z(),b.c(),this.h()},l(k){Ce("svelte-1b5017r",document.head).forEach(f),e=j(k),l=v(k,"DIV",{class:!0});var m=P(l);t=v(m,"HEADER",{class:!0});var _=P(t);n=v(_,"H1",{class:!0,"data-svelte-h":!0}),B(n)!=="svelte-18k68i7"&&(n.textContent=s),i=j(_),o=v(_,"P",{class:!0});var h=P(o);E=A(h,C),u=A(h," transactions"),h.forEach(f),_.forEach(f),d=j(m),b.l(m),m.forEach(f),this.h()},h(){document.title="Transactions - Jim's Finance",O(n,"class","page-title"),O(o,"class","page-subtitle"),O(t,"class","page-header"),O(l,"class","page")},m(k,T){U(k,e,T),U(k,l,T),r(l,t),r(t,n),r(t,i),r(t,o),r(o,E),r(o,u),r(l,d),b.m(l,null)},p(k,[T]){T&16&&C!==(C=k[4].length+"")&&F(E,C),w===(w=L(k))&&b?b.p(k,T):(b.d(1),b=w(k),b&&(b.c(),b.m(l,null)))},i:G,o:G,d(k){k&&(f(e),f(l)),b.d()}}}function he(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function de(a){return a.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})}function Ue(a,e,l){let t=!0,n="",s=[],i=[],o=[],C="all",E="all",u=null;const d=Array.from({length:12},(h,S)=>{const D=new Date;return D.setMonth(D.getMonth()-S),{value:D.toISOString().slice(0,7),label:D.toLocaleDateString("en-US",{month:"long",year:"numeric"})}});ge(async()=>{try{l(9,[s,o]=await Promise.all([Ee(200),Te()]),s)}catch(h){l(3,n=h.message)}finally{l(2,t=!1)}});function L(h){return o.find(S=>S.id===h)}async function w(h){try{await De(h),l(9,s=s.filter(S=>S.id!==h)),l(5,u=null)}catch(S){l(3,n=S.message)}}function b(){C=ie(this),l(0,C)}function k(){E=ie(this),l(1,E),l(6,d)}const T=h=>w(h.id),m=()=>l(5,u=null),_=h=>l(5,u=h.id);return a.$$.update=()=>{if(a.$$.dirty&515){let h=s;C!=="all"&&(h=h.filter(S=>S.transaction_type===C)),E!=="all"&&(h=h.filter(S=>S.date.startsWith(E))),l(4,i=h)}},[C,E,t,n,i,u,d,L,w,s,b,k,T,m,_]}class ze extends be{constructor(e){super(),ke(this,e,Ue,Le,me,{})}}export{ze as component};
