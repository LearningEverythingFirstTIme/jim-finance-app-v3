import{s as tt,n as fe,o as at,t as lt,b as We,r as st,a as rt}from"../chunks/DSOgNidj.js";import{S as nt,i as ot,d as n,a as x,b as r,k as v,l as it,g as k,c as i,e as p,m as Y,j as E,h as c,o as ct,s as Q,f as W,t as j,p as je,u as Je,q as X,v as Ke,w as dt,r as ft}from"../chunks/BTTWjJDS.js";import{e as Se}from"../chunks/D6YF6ztN.js";import{C as Qe}from"../chunks/CFNrZGOd.js";import{a as ht,d as ut}from"../chunks/BlK5NUL5.js";function Xe(s,e,t){const a=s.slice();return a[18]=e[t],a}function Ze(s,e,t){const a=s.slice();return a[21]=e[t],a}function vt(s){let e,t,a,d="Select Year",I,m,S,f,h,_,T="Total Income",R,A,D=N(s[2])+"",F,B,H,y,g="Total Expenses",J,u,C=N(s[1])+"",z,M,V,Z,Ae="Annual Net",Te,q,he=N(s[9])+"",ve,pe,P,$,He='<h3 class="card-title">ðŸ“ˆ Monthly Trend</h3>',Ve,se,ue,_e,O,ee,ze='<h3 class="card-title">ðŸ’³ Top Spending Categories</h3>',Le,me,U,te,Re='<h3 class="card-title">ðŸ“‹ Monthly Summary</h3>',we,re,ae,ne,Fe="<tr><th>Month</th> <th>Income</th> <th>Expenses</th> <th>Net</th></tr>",xe,oe,Me,Ne,ie=Se(s[10]),L=[];for(let l=0;l<ie.length;l+=1)L[l]=$e(Ze(s,ie,l));function Be(l,b){return l[6].length>0?bt:mt}let be=Be(s),G=be(s),ce=Se(s[0]),w=[];for(let l=0;l<ce.length;l+=1)w[l]=et(Xe(s,ce,l));return{c(){e=c("div"),t=c("div"),a=c("label"),a.textContent=d,I=E(),m=c("select");for(let l=0;l<L.length;l+=1)L[l].c();S=E(),f=c("div"),h=c("div"),_=c("div"),_.textContent=T,R=E(),A=c("div"),F=j(D),B=E(),H=c("div"),y=c("div"),y.textContent=g,J=E(),u=c("div"),z=j(C),M=E(),V=c("div"),Z=c("div"),Z.textContent=Ae,Te=E(),q=c("div"),ve=j(he),pe=E(),P=c("div"),$=c("div"),$.innerHTML=He,Ve=E(),se=c("div"),ue=c("canvas"),_e=E(),O=c("div"),ee=c("div"),ee.innerHTML=ze,Le=E(),G.c(),me=E(),U=c("div"),te=c("div"),te.innerHTML=Re,we=E(),re=c("div"),ae=c("table"),ne=c("thead"),ne.innerHTML=Fe,xe=E(),oe=c("tbody");for(let l=0;l<w.length;l+=1)w[l].c();this.h()},l(l){e=i(l,"DIV",{class:!0});var b=p(e);t=i(b,"DIV",{class:!0,style:!0});var o=p(t);a=i(o,"LABEL",{"data-svelte-h":!0}),Y(a)!=="svelte-o05uh5"&&(a.textContent=d),I=k(o),m=i(o,"SELECT",{class:!0});var K=p(m);for(let le=0;le<L.length;le+=1)L[le].l(K);K.forEach(n),o.forEach(n),b.forEach(n),S=k(l),f=i(l,"DIV",{class:!0});var de=p(f);h=i(de,"DIV",{class:!0});var ge=p(h);_=i(ge,"DIV",{class:!0,"data-svelte-h":!0}),Y(_)!=="svelte-1m3p30d"&&(_.textContent=T),R=k(ge),A=i(ge,"DIV",{class:!0});var Ge=p(A);F=W(Ge,D),Ge.forEach(n),ge.forEach(n),B=k(de),H=i(de,"DIV",{class:!0});var Ce=p(H);y=i(Ce,"DIV",{class:!0,"data-svelte-h":!0}),Y(y)!=="svelte-17143ev"&&(y.textContent=g),J=k(Ce),u=i(Ce,"DIV",{class:!0});var Ye=p(u);z=W(Ye,C),Ye.forEach(n),Ce.forEach(n),M=k(de),V=i(de,"DIV",{class:!0});var ye=p(V);Z=i(ye,"DIV",{class:!0,"data-svelte-h":!0}),Y(Z)!=="svelte-1hnqnfc"&&(Z.textContent=Ae),Te=k(ye),q=i(ye,"DIV",{class:!0});var qe=p(q);ve=W(qe,he),qe.forEach(n),ye.forEach(n),de.forEach(n),pe=k(l),P=i(l,"DIV",{class:!0});var De=p(P);$=i(De,"DIV",{class:!0,"data-svelte-h":!0}),Y($)!=="svelte-1wmbu5z"&&($.innerHTML=He),Ve=k(De),se=i(De,"DIV",{class:!0});var Oe=p(se);ue=i(Oe,"CANVAS",{}),p(ue).forEach(n),Oe.forEach(n),De.forEach(n),_e=k(l),O=i(l,"DIV",{class:!0});var ke=p(O);ee=i(ke,"DIV",{class:!0,"data-svelte-h":!0}),Y(ee)!=="svelte-zpkzyr"&&(ee.innerHTML=ze),Le=k(ke),G.l(ke),ke.forEach(n),me=k(l),U=i(l,"DIV",{class:!0});var Ee=p(U);te=i(Ee,"DIV",{class:!0,"data-svelte-h":!0}),Y(te)!=="svelte-14drwlh"&&(te.innerHTML=Re),we=k(Ee),re=i(Ee,"DIV",{class:!0});var Pe=p(re);ae=i(Pe,"TABLE",{});var Ie=p(ae);ne=i(Ie,"THEAD",{"data-svelte-h":!0}),Y(ne)!=="svelte-sew6cu"&&(ne.innerHTML=Fe),xe=k(Ie),oe=i(Ie,"TBODY",{});var Ue=p(oe);for(let le=0;le<w.length;le+=1)w[le].l(Ue);Ue.forEach(n),Ie.forEach(n),Pe.forEach(n),Ee.forEach(n),this.h()},h(){v(m,"class","input"),s[5]===void 0&&rt(()=>s[12].call(m)),v(t,"class","form-group"),dt(t,"margin-bottom","0"),v(e,"class","card animate-fade-in"),v(_,"class","metric-label"),v(A,"class","metric-value income"),v(h,"class","metric-card"),v(y,"class","metric-label"),v(u,"class","metric-value expense"),v(H,"class","metric-card"),v(Z,"class","metric-label"),v(q,"class","metric-value"),X(q,"income",s[9]>=0),X(q,"expense",s[9]<0),v(V,"class","metric-card"),v(f,"class","metric-grid animate-fade-in stagger-1"),v($,"class","card-header"),v(se,"class","chart-wrapper chart-wrapper-lg"),v(P,"class","card chart-container animate-fade-in stagger-2"),v(ee,"class","card-header"),v(O,"class","card chart-container animate-fade-in stagger-3"),v(te,"class","card-header"),v(re,"class","table-container"),v(U,"class","card animate-fade-in stagger-4")},m(l,b){x(l,e,b),r(e,t),r(t,a),r(t,I),r(t,m);for(let o=0;o<L.length;o+=1)L[o]&&L[o].m(m,null);Je(m,s[5],!0),x(l,S,b),x(l,f,b),r(f,h),r(h,_),r(h,R),r(h,A),r(A,F),r(f,B),r(f,H),r(H,y),r(H,J),r(H,u),r(u,z),r(f,M),r(f,V),r(V,Z),r(V,Te),r(V,q),r(q,ve),x(l,pe,b),x(l,P,b),r(P,$),r(P,Ve),r(P,se),r(se,ue),s[13](ue),x(l,_e,b),x(l,O,b),r(O,ee),r(O,Le),G.m(O,null),x(l,me,b),x(l,U,b),r(U,te),r(U,we),r(U,re),r(re,ae),r(ae,ne),r(ae,xe),r(ae,oe);for(let o=0;o<w.length;o+=1)w[o]&&w[o].m(oe,null);Me||(Ne=[Ke(m,"change",s[12]),Ke(m,"change",s[11])],Me=!0)},p(l,b){if(b&1024){ie=Se(l[10]);let o;for(o=0;o<ie.length;o+=1){const K=Ze(l,ie,o);L[o]?L[o].p(K,b):(L[o]=$e(K),L[o].c(),L[o].m(m,null))}for(;o<L.length;o+=1)L[o].d(1);L.length=ie.length}if(b&1056&&Je(m,l[5]),b&4&&D!==(D=N(l[2])+"")&&Q(F,D),b&2&&C!==(C=N(l[1])+"")&&Q(z,C),b&512&&he!==(he=N(l[9])+"")&&Q(ve,he),b&512&&X(q,"income",l[9]>=0),b&512&&X(q,"expense",l[9]<0),be===(be=Be(l))&&G?G.p(l,b):(G.d(1),G=be(l),G&&(G.c(),G.m(O,null))),b&1){ce=Se(l[0]);let o;for(o=0;o<ce.length;o+=1){const K=Xe(l,ce,o);w[o]?w[o].p(K,b):(w[o]=et(K),w[o].c(),w[o].m(oe,null))}for(;o<w.length;o+=1)w[o].d(1);w.length=ce.length}},d(l){l&&(n(e),n(S),n(f),n(pe),n(P),n(_e),n(O),n(me),n(U)),je(L,l),s[13](null),G.d(),je(w,l),Me=!1,st(Ne)}}}function pt(s){let e,t;return{c(){e=c("div"),t=j(s[4]),this.h()},l(a){e=i(a,"DIV",{class:!0});var d=p(e);t=W(d,s[4]),d.forEach(n),this.h()},h(){v(e,"class","error")},m(a,d){x(a,e,d),r(e,t)},p(a,d){d&16&&Q(t,a[4])},d(a){a&&n(e)}}}function _t(s){let e,t="Loading reports...";return{c(){e=c("div"),e.textContent=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1vdf2ms"&&(e.textContent=t),this.h()},h(){v(e,"class","loading")},m(a,d){x(a,e,d)},p:fe,d(a){a&&n(e)}}}function $e(s){let e,t=s[21]+"",a;return{c(){e=c("option"),a=j(t),this.h()},l(d){e=i(d,"OPTION",{});var I=p(e);a=W(I,t),I.forEach(n),this.h()},h(){e.__value=s[21],ft(e,e.__value)},m(d,I){x(d,e,I),r(e,a)},p:fe,d(d){d&&n(e)}}}function mt(s){let e,t='<div class="empty-state-icon">ðŸ“Š</div> <p>No expense data for this year</p>';return{c(){e=c("div"),e.innerHTML=t,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-1lduy0k"&&(e.innerHTML=t),this.h()},h(){v(e,"class","empty-state")},m(a,d){x(a,e,d)},p:fe,d(a){a&&n(e)}}}function bt(s){let e,t;return{c(){e=c("div"),t=c("canvas"),this.h()},l(a){e=i(a,"DIV",{class:!0});var d=p(e);t=i(d,"CANVAS",{}),p(t).forEach(n),d.forEach(n),this.h()},h(){v(e,"class","chart-wrapper")},m(a,d){x(a,e,d),r(e,t),s[14](t)},p:fe,d(a){a&&n(e),s[14](null)}}}function et(s){let e,t,a=s[18].month+"",d,I,m,S=N(s[18].income)+"",f,h,_,T=N(s[18].expense)+"",R,A,D,F=N(s[18].net)+"",B,H;return{c(){e=c("tr"),t=c("td"),d=j(a),I=E(),m=c("td"),f=j(S),h=E(),_=c("td"),R=j(T),A=E(),D=c("td"),B=j(F),H=E(),this.h()},l(y){e=i(y,"TR",{});var g=p(e);t=i(g,"TD",{});var J=p(t);d=W(J,a),J.forEach(n),I=k(g),m=i(g,"TD",{class:!0});var u=p(m);f=W(u,S),u.forEach(n),h=k(g),_=i(g,"TD",{class:!0});var C=p(_);R=W(C,T),C.forEach(n),A=k(g),D=i(g,"TD",{class:!0});var z=p(D);B=W(z,F),z.forEach(n),H=k(g),g.forEach(n),this.h()},h(){v(m,"class","income svelte-7ozrif"),v(_,"class","expense svelte-7ozrif"),v(D,"class","svelte-7ozrif"),X(D,"income",s[18].net>=0),X(D,"expense",s[18].net<0)},m(y,g){x(y,e,g),r(e,t),r(t,d),r(e,I),r(e,m),r(m,f),r(e,h),r(e,_),r(_,R),r(e,A),r(e,D),r(D,B),r(e,H)},p(y,g){g&1&&a!==(a=y[18].month+"")&&Q(d,a),g&1&&S!==(S=N(y[18].income)+"")&&Q(f,S),g&1&&T!==(T=N(y[18].expense)+"")&&Q(R,T),g&1&&F!==(F=N(y[18].net)+"")&&Q(B,F),g&1&&X(D,"income",y[18].net>=0),g&1&&X(D,"expense",y[18].net<0)},d(y){y&&n(e)}}}function gt(s){let e,t,a,d='<h1 class="page-title">Reports</h1> <p class="page-subtitle">Annual financial overview</p>',I;function m(h,_){return h[3]?_t:h[4]?pt:vt}let S=m(s),f=S(s);return{c(){e=E(),t=c("div"),a=c("header"),a.innerHTML=d,I=E(),f.c(),this.h()},l(h){it("svelte-yqptod",document.head).forEach(n),e=k(h),t=i(h,"DIV",{class:!0});var T=p(t);a=i(T,"HEADER",{class:!0,"data-svelte-h":!0}),Y(a)!=="svelte-eshxsc"&&(a.innerHTML=d),I=k(T),f.l(T),T.forEach(n),this.h()},h(){document.title="Reports - Jim's Finance",v(a,"class","page-header"),v(t,"class","page")},m(h,_){x(h,e,_),x(h,t,_),r(t,a),r(t,I),f.m(t,null)},p(h,[_]){S===(S=m(h))&&f?f.p(h,_):(f.d(1),f=S(h),f&&(f.c(),f.m(t,null)))},i:fe,o:fe,d(h){h&&(n(e),n(t)),f.d()}}}function N(s){return s.toLocaleString("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0})}function Ct(s,e,t){let a,d,I,m=!0,S="",f=new Date().getFullYear(),h=[],_=[],T,R,A=null,D=null;const F=Array.from({length:5},(u,C)=>new Date().getFullYear()-C);at(async()=>{await B()});async function B(){t(3,m=!0),t(4,S="");try{t(0,h=[]);for(let u=1;u<=12&&!(f===new Date().getFullYear()&&u>new Date().getMonth()+1);u++){const C=await ht(f,u);h.push({month:new Date(f,u-1).toLocaleDateString("en-US",{month:"short"}),income:C.total_income,expense:C.total_expense,net:C.total_income-C.total_expense})}t(6,_=await ut("expense",f)),await lt(),await H()}catch(u){t(4,S=u.message)}finally{t(3,m=!1)}}async function H(){if(!T||!R){setTimeout(H,100);return}A&&(A.destroy(),A=null),D&&(D.destroy(),D=null);const u=T.getContext("2d");if(u){const z=u.createLinearGradient(0,0,0,300);z.addColorStop(0,"#10b981"),z.addColorStop(1,"#059669");const M=u.createLinearGradient(0,0,0,300);M.addColorStop(0,"#f43f5e"),M.addColorStop(1,"#e11d48"),A=new Qe(u,{type:"bar",data:{labels:h.map(V=>V.month),datasets:[{label:"Income",data:h.map(V=>V.income),backgroundColor:z,borderRadius:6,borderSkipped:!1},{label:"Expenses",data:h.map(V=>V.expense),backgroundColor:M,borderRadius:6,borderSkipped:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"end",labels:{color:"#94a3b8",font:{size:12,family:"Inter"},usePointStyle:!0,pointStyle:"circle",padding:20}},tooltip:{backgroundColor:"#1e293b",titleColor:"#f8fafc",bodyColor:"#94a3b8",borderColor:"#334155",borderWidth:1,padding:12,callbacks:{label:V=>` ${V.dataset.label}: $${V.parsed.y.toLocaleString()}`}}},scales:{x:{ticks:{color:"#64748b",font:{size:12,family:"Inter"}},grid:{display:!1}},y:{ticks:{color:"#64748b",font:{size:11,family:"Inter"},callback:V=>`$${(V/1e3).toFixed(0)}k`},grid:{color:"#1f2937",drawBorder:!1}}}}})}const C=R.getContext("2d");if(C&&_.length>0){const z=C.createLinearGradient(0,0,300,0);z.addColorStop(0,"#3b82f6"),z.addColorStop(1,"#60a5fa"),D=new Qe(C,{type:"bar",data:{labels:_.slice(0,10).map(M=>`${M.icon} ${M.name}`),datasets:[{label:"Spending",data:_.slice(0,10).map(M=>M.total),backgroundColor:z,borderRadius:4,borderSkipped:!1}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"#1e293b",titleColor:"#f8fafc",bodyColor:"#94a3b8",borderColor:"#334155",borderWidth:1,padding:12,callbacks:{label:M=>` $${M.parsed.x.toLocaleString()}`}}},scales:{x:{ticks:{color:"#64748b",font:{size:11,family:"Inter"},callback:M=>`$${(M/1e3).toFixed(0)}k`},grid:{color:"#1f2937",drawBorder:!1}},y:{ticks:{color:"#f8fafc",font:{size:12,family:"Inter"}},grid:{display:!1}}}}})}}function y(){f=ct(this),t(5,f),t(10,F)}function g(u){We[u?"unshift":"push"](()=>{T=u,t(7,T)})}function J(u){We[u?"unshift":"push"](()=>{R=u,t(8,R)})}return s.$$.update=()=>{s.$$.dirty&1&&t(2,a=h.reduce((u,C)=>u+C.income,0)),s.$$.dirty&1&&t(1,d=h.reduce((u,C)=>u+C.expense,0)),s.$$.dirty&6&&t(9,I=a-d)},[h,d,a,m,S,f,_,T,R,I,F,B,y,g,J]}class St extends nt{constructor(e){super(),ot(this,e,Ct,gt,tt,{})}}export{St as component};
