import { c as create_ssr_component, f as escape } from "../../../chunks/ssr.js";
import "../../../chunks/supabase.js";
const css = {
  code: ".transactions-list.svelte-1763brm.svelte-1763brm{display:flex;flex-direction:column;gap:0.625rem}.delete-confirm.svelte-1763brm.svelte-1763brm{display:flex;gap:0.25rem}.empty-state.svelte-1763brm a.svelte-1763brm{color:var(--color-primary);text-decoration:none}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport { getTransactions, deleteTransaction, getCategories } from \\"$lib/api\\";\\nlet loading = true;\\nlet error = \\"\\";\\nlet transactions = [];\\nlet filteredTransactions = [];\\nlet categories = [];\\nlet filterType = \\"all\\";\\nlet filterMonth = \\"all\\";\\nlet deleteConfirmId = null;\\nconst months = Array.from({ length: 12 }, (_, i) => {\\n  const d = /* @__PURE__ */ new Date();\\n  d.setMonth(d.getMonth() - i);\\n  return {\\n    value: d.toISOString().slice(0, 7),\\n    label: d.toLocaleDateString(\\"en-US\\", { month: \\"long\\", year: \\"numeric\\" })\\n  };\\n});\\n$: {\\n  let filtered = transactions;\\n  if (filterType !== \\"all\\") {\\n    filtered = filtered.filter((t) => t.transaction_type === filterType);\\n  }\\n  if (filterMonth !== \\"all\\") {\\n    filtered = filtered.filter((t) => t.date.startsWith(filterMonth));\\n  }\\n  filteredTransactions = filtered;\\n}\\nonMount(async () => {\\n  try {\\n    [transactions, categories] = await Promise.all([\\n      getTransactions(200),\\n      getCategories()\\n    ]);\\n  } catch (e) {\\n    error = e.message;\\n  } finally {\\n    loading = false;\\n  }\\n});\\nfunction getCategory(id) {\\n  return categories.find((c) => c.id === id);\\n}\\nasync function handleDelete(id) {\\n  try {\\n    await deleteTransaction(id);\\n    transactions = transactions.filter((t) => t.id !== id);\\n    deleteConfirmId = null;\\n  } catch (e) {\\n    error = e.message;\\n  }\\n}\\nfunction formatDate(dateStr) {\\n  return new Date(dateStr).toLocaleDateString(\\"en-US\\", {\\n    month: \\"short\\",\\n    day: \\"numeric\\"\\n  });\\n}\\nfunction formatCurrency(amount) {\\n  return amount.toLocaleString(\\"en-US\\", {\\n    minimumFractionDigits: 0,\\n    maximumFractionDigits: 0\\n  });\\n}\\n<\/script>\\n\\n<svelte:head>\\n  <title>Transactions - Jim's Finance</title>\\n</svelte:head>\\n\\n<div class=\\"page\\">\\n  <header class=\\"page-header\\">\\n    <h1 class=\\"page-title\\">Transaction History</h1>\\n    <p class=\\"page-subtitle\\">{filteredTransactions.length} transactions</p>\\n  </header>\\n  \\n  {#if loading}\\n    <div class=\\"loading\\">Loading transactions...</div>\\n  {:else if error}\\n    <div class=\\"error\\">{error}</div>\\n  {:else}\\n    <!-- Filters -->\\n    <div class=\\"filter-row animate-fade-in\\">\\n      <select class=\\"input\\" bind:value={filterType}>\\n        <option value=\\"all\\">All Types</option>\\n        <option value=\\"income\\">üíµ Income</option>\\n        <option value=\\"expense\\">üí∏ Expense</option>\\n      </select>\\n      \\n      <select class=\\"input\\" bind:value={filterMonth}>\\n        <option value=\\"all\\">All Time</option>\\n        {#each months as month}\\n          <option value={month.value}>{month.label}</option>\\n        {/each}\\n      </select>\\n    </div>\\n    \\n    <!-- Transaction List -->\\n    {#if filteredTransactions.length === 0}\\n      <div class=\\"empty-state animate-fade-in\\">\\n        <div class=\\"empty-state-icon\\">üìã</div>\\n        <p>No transactions found.</p>\\n        <a href=\\"/add\\" class=\\"btn btn-primary\\" style=\\"margin-top: 1rem;\\">Add Transaction</a>\\n      </div>\\n    {:else}\\n      <div class=\\"transactions-list\\">\\n        {#each filteredTransactions as tx, i}\\n          {@const cat = getCategory(tx.category_id)}\\n          <div class=\\"transaction-item animate-fade-in\\" style=\\"animation-delay: {i * 0.03}s\\">\\n            <div class=\\"transaction-info\\">\\n              <div class=\\"transaction-icon\\">\\n                {cat?.icon || '‚ùì'}\\n              </div>\\n              <div class=\\"transaction-details\\">\\n                <h4>{cat?.name || 'Unknown'}</h4>\\n                <p>{formatDate(tx.date)}{#if tx.notes} ‚Ä¢ {tx.notes}{/if}</p>\\n              </div>\\n            </div>\\n            \\n            <div class=\\"transaction-actions\\">\\n              <span \\n                class=\\"transaction-amount\\"\\n                class:income={tx.transaction_type === 'income'}\\n                class:expense={tx.transaction_type === 'expense'}\\n              >\\n                {tx.transaction_type === 'income' ? '+' : '-'}\\n                \${formatCurrency(tx.amount)}\\n              </span>\\n              \\n              {#if deleteConfirmId === tx.id}\\n                <div class=\\"delete-confirm\\">\\n                  <button class=\\"btn btn-danger btn-sm\\" on:click={() => handleDelete(tx.id)}>‚úì</button>\\n                  <button class=\\"btn btn-secondary btn-sm\\" on:click={() => deleteConfirmId = null}>‚úï</button>\\n                </div>\\n              {:else}\\n                <button class=\\"delete-btn\\" on:click={() => deleteConfirmId = tx.id}>üóëÔ∏è</button>\\n              {/if}\\n            </div>\\n          </div>\\n        {/each}\\n      </div>\\n    {/if}\\n  {/if}\\n</div>\\n\\n<style>\\n  .transactions-list {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.625rem;\\n  }\\n  \\n  .delete-confirm {\\n    display: flex;\\n    gap: 0.25rem;\\n  }\\n  \\n  .empty-state a {\\n    color: var(--color-primary);\\n    text-decoration: none;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAkJE,gDAAmB,CACjB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,QACP,CAEA,6CAAgB,CACd,OAAO,CAAE,IAAI,CACb,GAAG,CAAE,OACP,CAEA,2BAAY,CAAC,gBAAE,CACb,KAAK,CAAE,IAAI,eAAe,CAAC,CAC3B,eAAe,CAAE,IACnB"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let transactions = [];
  let filteredTransactions = [];
  Array.from({ length: 12 }, (_, i) => {
    const d = /* @__PURE__ */ new Date();
    d.setMonth(d.getMonth() - i);
    return {
      value: d.toISOString().slice(0, 7),
      label: d.toLocaleDateString("en-US", { month: "long", year: "numeric" })
    };
  });
  $$result.css.add(css);
  {
    {
      let filtered = transactions;
      filteredTransactions = filtered;
    }
  }
  return `${$$result.head += `<!-- HEAD_svelte-1b5017r_START -->${$$result.title = `<title>Transactions - Jim&#39;s Finance</title>`, ""}<!-- HEAD_svelte-1b5017r_END -->`, ""} <div class="page"><header class="page-header"><h1 class="page-title" data-svelte-h="svelte-18k68i7">Transaction History</h1> <p class="page-subtitle">${escape(filteredTransactions.length)} transactions</p></header> ${`<div class="loading" data-svelte-h="svelte-1a20ex6">Loading transactions...</div>`} </div>`;
});
export {
  Page as default
};
