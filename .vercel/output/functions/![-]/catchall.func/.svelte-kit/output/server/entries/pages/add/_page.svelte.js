import { c as create_ssr_component } from "../../../chunks/ssr.js";
import "@sveltejs/kit/internal";
import "../../../chunks/exports.js";
import "../../../chunks/utils.js";
import "@sveltejs/kit/internal/server";
import "../../../chunks/state.svelte.js";
import "../../../chunks/supabase.js";
const css = {
  code: 'form.svelte-bqo1yu{display:flex;flex-direction:column;gap:var(--space-md)}button[type="submit"].svelte-bqo1yu{width:100%}',
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport { goto } from \\"$app/navigation\\";\\nimport { addTransaction, getCategories } from \\"$lib/api\\";\\nlet loading = true;\\nlet saving = false;\\nlet error = \\"\\";\\nlet success = \\"\\";\\nlet date = (/* @__PURE__ */ new Date()).toISOString().split(\\"T\\")[0];\\nlet amount = \\"\\";\\nlet transactionType = \\"expense\\";\\nlet categoryId = null;\\nlet notes = \\"\\";\\nlet categories = [];\\nlet filteredCategories = [];\\n$: filteredCategories = categories.filter(\\n  (c) => transactionType === \\"income\\" ? c.is_income === 1 : c.is_income === 0\\n);\\n$: if (filteredCategories.length > 0 && !categoryId) {\\n  categoryId = filteredCategories[0].id;\\n}\\nonMount(async () => {\\n  try {\\n    categories = await getCategories();\\n  } catch (e) {\\n    error = e.message;\\n  } finally {\\n    loading = false;\\n  }\\n});\\nasync function handleSubmit() {\\n  if (!amount || !categoryId) return;\\n  saving = true;\\n  error = \\"\\";\\n  success = \\"\\";\\n  try {\\n    await addTransaction(\\n      date,\\n      parseFloat(amount),\\n      categoryId,\\n      transactionType,\\n      notes\\n    );\\n    success = \`Added \${transactionType}: $\${parseFloat(amount).toLocaleString(\\"en-US\\", { minimumFractionDigits: 2 })}\`;\\n    amount = \\"\\";\\n    notes = \\"\\";\\n    date = (/* @__PURE__ */ new Date()).toISOString().split(\\"T\\")[0];\\n    setTimeout(() => {\\n      goto(\\"/\\");\\n    }, 1200);\\n  } catch (e) {\\n    error = e.message;\\n  } finally {\\n    saving = false;\\n  }\\n}\\n<\/script>\\n\\n<svelte:head>\\n  <title>Add Transaction - Jim's Finance</title>\\n</svelte:head>\\n\\n<div class=\\"page\\">\\n  <header class=\\"page-header\\">\\n    <h1 class=\\"page-title\\">Add Transaction</h1>\\n    <p class=\\"page-subtitle\\">Record a new income or expense</p>\\n  </header>\\n  \\n  {#if loading}\\n    <div class=\\"loading\\">Loading...</div>\\n  {:else}\\n    {#if error}\\n      <div class=\\"error\\">{error}</div>\\n    {/if}\\n    \\n    {#if success}\\n      <div class=\\"success\\">{success} âœ…</div>\\n    {/if}\\n    \\n    <form on:submit|preventDefault={handleSubmit} class=\\"animate-fade-in\\">\\n      <div class=\\"card\\">\\n        <div class=\\"form-group\\">\\n          <label>Transaction Type</label>\\n          <div class=\\"type-selector\\">\\n            <button\\n              type=\\"button\\"\\n              class=\\"type-btn\\"\\n              class:active={transactionType === 'expense'}\\n              class:expense-type={transactionType === 'expense'}\\n              on:click={() => transactionType = 'expense'}\\n            >\\n              ðŸ’¸ Expense\\n            </button>\\n            <button\\n              type=\\"button\\"\\n              class=\\"type-btn\\"\\n              class:active={transactionType === 'income'}\\n              class:income-type={transactionType === 'income'}\\n              on:click={() => transactionType = 'income'}\\n            >\\n              ðŸ’µ Income\\n            </button>\\n          </div>\\n        </div>\\n      </div>\\n      \\n      <div class=\\"card\\">\\n        <div class=\\"form-row\\">\\n          <div class=\\"form-group\\">\\n            <label for=\\"date\\">Date</label>\\n            <input\\n              id=\\"date\\"\\n              type=\\"date\\"\\n              class=\\"input\\"\\n              bind:value={date}\\n              required\\n            />\\n          </div>\\n          \\n          <div class=\\"form-group\\">\\n            <label for=\\"amount\\">Amount</label>\\n            <input\\n              id=\\"amount\\"\\n              type=\\"number\\"\\n              class=\\"input\\"\\n              bind:value={amount}\\n              placeholder=\\"0.00\\"\\n              step=\\"0.01\\"\\n              min=\\"0.01\\"\\n              required\\n            />\\n          </div>\\n        </div>\\n        \\n        <div class=\\"form-group\\">\\n          <label for=\\"category\\">Category</label>\\n          <select id=\\"category\\" class=\\"input\\" bind:value={categoryId} required>\\n            {#each filteredCategories as cat}\\n              <option value={cat.id}>{cat.icon} {cat.name}</option>\\n            {/each}\\n          </select>\\n        </div>\\n        \\n        <div class=\\"form-group\\">\\n          <label for=\\"notes\\">Notes (optional)</label>\\n          <input\\n            id=\\"notes\\"\\n            type=\\"text\\"\\n            class=\\"input\\"\\n            bind:value={notes}\\n            placeholder=\\"Add a note...\\"\\n          />\\n        </div>\\n      </div>\\n      \\n      <button type=\\"submit\\" class=\\"btn btn-success btn-lg\\" disabled={saving || !amount}>\\n        {saving ? 'Saving...' : 'âž• Add Transaction'}\\n      </button>\\n    </form>\\n  {/if}\\n</div>\\n\\n<style>\\n  form {\\n    display: flex;\\n    flex-direction: column;\\n    gap: var(--space-md);\\n  }\\n  \\n  button[type=\\"submit\\"] {\\n    width: 100%;\\n  }\\n</style>\\n"],"names":[],"mappings":"AAkKE,kBAAK,CACH,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,IAAI,UAAU,CACrB,CAEA,MAAM,CAAC,IAAI,CAAC,QAAQ,eAAE,CACpB,KAAK,CAAE,IACT"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
  let categoryId = null;
  let categories = [];
  let filteredCategories = [];
  $$result.css.add(css);
  filteredCategories = categories.filter((c) => c.is_income === 0);
  {
    if (filteredCategories.length > 0 && !categoryId) {
      categoryId = filteredCategories[0].id;
    }
  }
  return `${$$result.head += `<!-- HEAD_svelte-bys65d_START -->${$$result.title = `<title>Add Transaction - Jim&#39;s Finance</title>`, ""}<!-- HEAD_svelte-bys65d_END -->`, ""} <div class="page"><header class="page-header" data-svelte-h="svelte-hztst1"><h1 class="page-title">Add Transaction</h1> <p class="page-subtitle">Record a new income or expense</p></header> ${`<div class="loading" data-svelte-h="svelte-1f5y80z">Loading...</div>`} </div>`;
});
export {
  Page as default
};
