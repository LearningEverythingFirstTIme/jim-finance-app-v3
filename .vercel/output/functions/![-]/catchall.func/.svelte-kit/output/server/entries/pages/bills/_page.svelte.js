import { c as create_ssr_component } from "../../../chunks/ssr.js";
import "../../../chunks/supabase.js";
const css = {
  code: ".add-btn.svelte-wn2slj.svelte-wn2slj{width:100%;margin-bottom:var(--space-md)}.add-form.svelte-wn2slj.svelte-wn2slj{margin-bottom:var(--space-lg)}.bills-list.svelte-wn2slj.svelte-wn2slj{display:flex;flex-direction:column;gap:0.75rem}.delete-confirm.svelte-wn2slj.svelte-wn2slj{display:flex;align-items:center;gap:0.5rem;font-size:0.875rem}.delete-confirm.svelte-wn2slj span.svelte-wn2slj{color:var(--color-text-muted)}",
  map: `{"version":3,"file":"+page.svelte","sources":["+page.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { onMount } from \\"svelte\\";\\nimport {\\n  getRecurringBills,\\n  addRecurringBill,\\n  toggleRecurringBill,\\n  deleteRecurringBill,\\n  getCategories\\n} from \\"$lib/api\\";\\nlet loading = true;\\nlet error = \\"\\";\\nlet bills = [];\\nlet categories = [];\\nlet showAddForm = false;\\nlet deleteConfirmId = null;\\nlet newName = \\"\\";\\nlet newAmount = \\"\\";\\nlet newDueDay = 1;\\nlet newCategoryId = null;\\nonMount(async () => {\\n  try {\\n    [bills, categories] = await Promise.all([\\n      getRecurringBills(),\\n      getCategories()\\n    ]);\\n    const expenseCats = categories.filter((c) => c.is_income === 0);\\n    if (expenseCats.length > 0) {\\n      newCategoryId = expenseCats[0].id;\\n    }\\n  } catch (e) {\\n    error = e.message;\\n  } finally {\\n    loading = false;\\n  }\\n});\\nfunction getCategory(id) {\\n  return categories.find((c) => c.id === id);\\n}\\nasync function handleAdd() {\\n  if (!newName || !newAmount || !newCategoryId) return;\\n  try {\\n    await addRecurringBill(\\n      newName,\\n      parseFloat(newAmount),\\n      newDueDay,\\n      newCategoryId\\n    );\\n    newName = \\"\\";\\n    newAmount = \\"\\";\\n    newDueDay = 1;\\n    showAddForm = false;\\n    bills = await getRecurringBills();\\n  } catch (e) {\\n    error = e.message;\\n  }\\n}\\nasync function handleToggle(bill) {\\n  try {\\n    await toggleRecurringBill(bill.id, bill.is_active === 0);\\n    bills = bills.map(\\n      (b) => b.id === bill.id ? { ...b, is_active: b.is_active === 0 ? 1 : 0 } : b\\n    );\\n  } catch (e) {\\n    error = e.message;\\n  }\\n}\\nasync function handleDelete(id) {\\n  try {\\n    await deleteRecurringBill(id);\\n    bills = bills.filter((b) => b.id !== id);\\n    deleteConfirmId = null;\\n  } catch (e) {\\n    error = e.message;\\n  }\\n}\\nfunction formatCurrency(amount) {\\n  return amount.toLocaleString(\\"en-US\\", {\\n    minimumFractionDigits: 0,\\n    maximumFractionDigits: 0\\n  });\\n}\\n<\/script>\\n\\n<svelte:head>\\n  <title>Recurring Bills - Jim's Finance</title>\\n</svelte:head>\\n\\n<div class=\\"page\\">\\n  <header class=\\"page-header\\">\\n    <h1 class=\\"page-title\\">Recurring Bills</h1>\\n    <p class=\\"page-subtitle\\">Track your monthly subscriptions & bills</p>\\n  </header>\\n  \\n  {#if loading}\\n    <div class=\\"loading\\">Loading bills...</div>\\n  {:else if error}\\n    <div class=\\"error\\">{error}</div>\\n  {:else}\\n    <!-- Add Button -->\\n    <button \\n      class=\\"btn {showAddForm ? 'btn-secondary' : 'btn-primary'} add-btn animate-fade-in\\" \\n      on:click={() => showAddForm = !showAddForm}\\n    >\\n      {showAddForm ? '‚úï Cancel' : '‚ûï Add New Bill'}\\n    </button>\\n    \\n    <!-- Add Form -->\\n    {#if showAddForm}\\n      <div class=\\"card add-form animate-fade-in\\">\\n        <div class=\\"card-header\\">\\n          <h3 class=\\"card-title\\">New Recurring Bill</h3>\\n        </div>\\n        \\n        <div class=\\"form-group\\">\\n          <label>Bill Name</label>\\n          <input\\n            type=\\"text\\"\\n            class=\\"input\\"\\n            bind:value={newName}\\n            placeholder=\\"e.g., Rent, Netflix\\"\\n          />\\n        </div>\\n        \\n        <div class=\\"form-row\\">\\n          <div class=\\"form-group\\">\\n            <label>Amount</label>\\n            <input\\n              type=\\"number\\"\\n              class=\\"input\\"\\n              bind:value={newAmount}\\n              placeholder=\\"0.00\\"\\n              step=\\"0.01\\"\\n              min=\\"0.01\\"\\n            />\\n          </div>\\n          \\n          <div class=\\"form-group\\">\\n            <label>Due Day (1-28)</label>\\n            <input\\n              type=\\"number\\"\\n              class=\\"input\\"\\n              bind:value={newDueDay}\\n              min=\\"1\\"\\n              max=\\"28\\"\\n            />\\n          </div>\\n        </div>\\n        \\n        <div class=\\"form-group\\">\\n          <label>Category</label>\\n          <select class=\\"input\\" bind:value={newCategoryId}>\\n            {#each categories.filter(c => c.is_income === 0) as cat}\\n              <option value={cat.id}>{cat.icon} {cat.name}</option>\\n            {/each}\\n          </select>\\n        </div>\\n        \\n        <button class=\\"btn btn-success\\" on:click={handleAdd} disabled={!newName || !newAmount}>\\n          Save Bill\\n        </button>\\n      </div>\\n    {/if}\\n    \\n    <!-- Bills List -->\\n    {#if bills.length === 0}\\n      <div class=\\"empty-state animate-fade-in\\">\\n        <div class=\\"empty-state-icon\\">üîÑ</div>\\n        <p>No recurring bills yet.</p>\\n        <p style=\\"color: var(--color-text-muted); font-size: 0.875rem;\\">Add your subscriptions and monthly bills to track them.</p>\\n      </div>\\n    {:else}\\n      <div class=\\"bills-list\\">\\n        {#each bills as bill, i}\\n          {@const cat = getCategory(bill.category_id)}\\n          \\n          <div class=\\"bill-card\\" class:inactive={bill.is_active === 0} style=\\"animation-delay: {i * 0.05}s\\">\\n            <div class=\\"bill-header\\">\\n              <div class=\\"bill-title\\">\\n                <div class=\\"bill-icon\\">{cat?.icon || 'üì¶'}</div>\\n                <div>\\n                  <h4>{bill.name}</h4>\\n                  <span class=\\"bill-category\\">{cat?.name || 'Unknown'}</span>\\n                </div>\\n              </div>\\n              \\n              <div class=\\"bill-amount\\">\\n                \${formatCurrency(bill.amount)}\\n              </div>\\n            </div>\\n            \\n            <div class=\\"bill-footer\\">\\n              <span class=\\"due-day\\">\\n                üìÖ Due on the {bill.due_day}{['st','nd','rd'][((bill.due_day+90)%100-10)%10-1]||'th'}\\n              </span>\\n              \\n              <div class=\\"bill-actions\\">\\n                <button \\n                  class=\\"toggle-btn\\"\\n                  class:active={bill.is_active === 1}\\n                  on:click={() => handleToggle(bill)}\\n                >\\n                  {bill.is_active === 1 ? '‚è∏Ô∏è Pause' : '‚ñ∂Ô∏è Resume'}\\n                </button>\\n                \\n                {#if deleteConfirmId === bill.id}\\n                  <div class=\\"delete-confirm\\">\\n                    <span>Delete?</span>\\n                    <button class=\\"btn btn-danger btn-sm\\" on:click={() => handleDelete(bill.id)}>Yes</button>\\n                    <button class=\\"btn btn-secondary btn-sm\\" on:click={() => deleteConfirmId = null}>No</button>\\n                  </div>\\n                {:else}\\n                  <button class=\\"delete-btn\\" on:click={() => deleteConfirmId = bill.id}>üóëÔ∏è</button>\\n                {/if}\\n              </div>\\n            </div>\\n          </div>\\n        {/each}\\n      </div>\\n    {/if}\\n  {/if}\\n</div>\\n\\n<style>\\n  .add-btn {\\n    width: 100%;\\n    margin-bottom: var(--space-md);\\n  }\\n  \\n  .add-form {\\n    margin-bottom: var(--space-lg);\\n  }\\n  \\n  .bills-list {\\n    display: flex;\\n    flex-direction: column;\\n    gap: 0.75rem;\\n  }\\n  \\n  .delete-confirm {\\n    display: flex;\\n    align-items: center;\\n    gap: 0.5rem;\\n    font-size: 0.875rem;\\n  }\\n  \\n  .delete-confirm span {\\n    color: var(--color-text-muted);\\n  }\\n</style>\\n"],"names":[],"mappings":"AA8NE,oCAAS,CACP,KAAK,CAAE,IAAI,CACX,aAAa,CAAE,IAAI,UAAU,CAC/B,CAEA,qCAAU,CACR,aAAa,CAAE,IAAI,UAAU,CAC/B,CAEA,uCAAY,CACV,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,GAAG,CAAE,OACP,CAEA,2CAAgB,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,MAAM,CACX,SAAS,CAAE,QACb,CAEA,6BAAe,CAAC,kBAAK,CACnB,KAAK,CAAE,IAAI,kBAAkB,CAC/B"}`
};
const Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  $$result.css.add(css);
  return `${$$result.head += `<!-- HEAD_svelte-46hkxr_START -->${$$result.title = `<title>Recurring Bills - Jim&#39;s Finance</title>`, ""}<!-- HEAD_svelte-46hkxr_END -->`, ""} <div class="page"><header class="page-header" data-svelte-h="svelte-1636m7i"><h1 class="page-title">Recurring Bills</h1> <p class="page-subtitle">Track your monthly subscriptions &amp; bills</p></header> ${`<div class="loading" data-svelte-h="svelte-1bx6put">Loading bills...</div>`} </div>`;
});
export {
  Page as default
};
